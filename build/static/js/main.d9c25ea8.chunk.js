(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{54:function(e,t,c){},58:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){},90:function(e,t,c){},91:function(e,t,c){},97:function(e,t,c){},98:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c(1),n=c.n(s),r=c(19),i=c.n(r),l=(c(54),c(2)),d=c(10),o=c(14),j=c(6),b=c(7),h=c(9),u=c(8),m=c(3);c(58);var O=function(e){var t=e.children,c=e.onClick;return Object(a.jsx)("div",{className:"icon-container p-2 link rounded-circle shadow shadow-secondary text-center",onClick:c,children:t})},x=c(44),p=c.n(x).a.create({baseURL:"http://posbackend.pinpointwriters.com/public/api"});function f(e,t,c,a){"success"===t?o.b.success(e,{position:c||"top-right",toastId:a}):"warning"===t?o.b.warn(e,{position:c||"top-right",toastId:a}):o.b.error(e,{position:c||"top-right",toastId:a})}function v(e,t){return p.post(e,t)}function N(e){return p.get(e)}function y(e,t){return e.then((function(e){return f&&f(t,"success"),e}))}function g(e){return e.catch((function(e){if(e.response){var t=e.response.data;if(t)if(t.errors)for(var c in t.errors){t.errors[c].forEach((function(e){return f(e,"danger")}))}else f(t.message,"danger");else f("Database Error","danger")}else f("You are offline","warning");return e}))}var k=c(27),w=c.n(k),C=2,_=1,S=1,P=2,E=["Cash","Mpesa","Mpesa & Cash","Card","Glovo","Jumia","Uber Eats","Little Cab","Credit"],A="500px",D="300px",T={ADD:{display:"Created stock",value:1,badgeColor:"dark"},EDIT:{display:"Updated stock",value:2,badgeColor:"primary"},SALE:{display:"Made a sale",value:3,badgeColor:"success"}},I={TODAY:{display:"Today",value:"today"},YESTERDAY:{display:"Yesterday",value:"yesterday"},THIS_WEEK:{display:"This week",value:"week"},THIS_MONTH:{display:"This Month",value:"month"},THIS_YEAR:{display:"This Year",value:"year"},ALL_TIME:{display:"All Time",value:""}};function F(e){for(var t in e)if(!e[t])return!0;return!1}function M(e){return e?w()(e).fromNow():"_"}function B(e){return JSON.parse(localStorage.getItem(e||"userSelection"))}function R(e){localStorage.removeItem(e)}function q(e){if(!e)return"_";var t=w()(e);return t.isValid()?t.format("DD/MM/YYYY h:mm a"):"_"}function U(e){for(var t="",c=arguments.length,a=new Array(c>1?c-1:0),s=1;s<c;s++)a[s-1]=arguments[s];return a.forEach((function(e){for(var c in e)e[c]&&(t="".concat(t).concat(c,"=").concat(e[c],"&")),0===e[c]&&(t="".concat(t).concat(c,"=").concat(e[c],"&"))})),t=t.substr(0,t.length-1),"".concat(e,"?").concat(t)}function L(e,t){return"".concat(e*t)}function H(e,t){return"count"===e?t:"".concat(t," ").concat(e)}function Y(e){var t=[];for(var c in e)t.push(e[c]);return t}function K(e,t){var c=w()(e);switch(t){case I.TODAY.value:case I.YESTERDAY.value:return c.format("h a");case I.THIS_WEEK.value:return c.format("ddd");case I.THIS_MONTH.value:return c.format("Do");case I.THIS_YEAR.value:return c.format("MMM");default:return c.format("MMM - YYYY")}}function V(e,t,c){return t.forEach((function(t){e[t]||delete e[t]})),c&&c.forEach((function(t){var c=e[t];c||0===parseInt(c)||delete e[t]})),e}var W=c(5),G=c(11),z=c.n(G);function Q(e){var t=function(){R("currentUser"),e.history.push("/")};Object(s.useEffect)((function(){z()(".nav-control").on("click",(function(){z()("#main-wrapper").toggleClass("menu-toggle"),z()(".hamburger").toggleClass("is-active"),z()(".deznav").toggleClass("d-none"),z()(".content-body").toggleClass("ml-0")}))}),[]);var c=B("currentUser");return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"nav-header",children:[Object(a.jsx)(W.b,{to:"/admin",className:"brand-logo h4 text-dark",children:"SCRATCH LTD"}),Object(a.jsx)("div",{className:"nav-control",children:Object(a.jsxs)("div",{className:"hamburger",children:[Object(a.jsx)("span",{className:"line"}),Object(a.jsx)("span",{className:"line"}),Object(a.jsx)("span",{className:"line"})]})})]}),Object(a.jsx)("div",{className:"header",children:Object(a.jsx)("div",{className:"header-content",children:Object(a.jsx)("nav",{className:"navbar navbar-expand",children:Object(a.jsxs)("div",{className:"collapse navbar-collapse justify-content-between",children:[Object(a.jsx)("div",{className:"header-left"}),Object(a.jsx)("ul",{className:"navbar-nav header-right",children:Object(a.jsxs)("li",{className:"nav-item dropdown header-profile",children:[Object(a.jsxs)("a",{className:"nav-link",href:"#",role:"button","data-toggle":"dropdown",children:[Object(a.jsx)("div",{className:"header-info",children:Object(a.jsxs)("span",{children:["Hello, ",Object(a.jsx)("strong",{children:c.firstname})]})}),Object(a.jsx)("div",{className:"text-white h3 p-1 mr-2",style:{color:"#fff"},children:Object(a.jsxs)("svg",{id:"icon-user1",xmlns:"http://www.w3.org/2000/svg",className:"text-white",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[Object(a.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),Object(a.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})})]}),Object(a.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[Object(a.jsxs)("a",{href:"app-profile.html",className:"dropdown-item ai-icon d-none",children:[Object(a.jsxs)("svg",{id:"icon-user1",xmlns:"http://www.w3.org/2000/svg",className:"text-primary",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[Object(a.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),Object(a.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),Object(a.jsx)("span",{className:"ml-2",children:"Profile "})]}),Object(a.jsxs)("a",{href:"email-inbox.html",className:"dropdown-item ai-icon d-none",children:[Object(a.jsxs)("svg",{id:"icon-inbox",xmlns:"http://www.w3.org/2000/svg",className:"text-success",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[Object(a.jsx)("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),Object(a.jsx)("polyline",{points:"22,6 12,13 2,6"})]}),Object(a.jsx)("span",{className:"ml-2",children:"Inbox "})]}),Object(a.jsxs)("button",{onClick:t,className:"dropdown-item ai-icon",children:[Object(a.jsxs)("svg",{id:"icon-logout",xmlns:"http://www.w3.org/2000/svg",className:"text-danger",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[Object(a.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),Object(a.jsx)("polyline",{points:"16 17 21 12 16 7"}),Object(a.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Object(a.jsxs)("span",{className:"ml-2",onClick:t,children:["Logout"," "]})]})]})]})})]})})})})]})}function J(){return Object(a.jsx)("div",{className:"deznav",children:Object(a.jsx)("div",{className:"deznav-scroll",children:Object(a.jsxs)("div",{className:"metismenu",id:"menu",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsxs)(W.b,{to:"/admin",className:"nav-link  ",children:[Object(a.jsx)("span",{"data-feather":"home"}),"Dashboard ",Object(a.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsxs)(W.b,{to:"/admin/admins",className:"nav-link",children:[Object(a.jsx)("span",{"data-feather":"file"}),"Admins"]})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsxs)(W.b,{to:"/admin/employees",className:"nav-link",children:[Object(a.jsx)("span",{"data-feather":"shopping-cart"}),"Employees"]})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsxs)(W.b,{to:"/admin/categories",className:"nav-link",children:[Object(a.jsx)("span",{"data-feather":"users"}),"Categories"]})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsxs)(W.b,{to:"/admin/stock",className:"nav-link",children:[Object(a.jsx)("span",{"data-feather":"users"}),"Stock"]})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsxs)(W.b,{to:"/admin/sales",className:"nav-link",children:[Object(a.jsx)("span",{"data-feather":"layers"}),"Sale History"]})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsxs)(W.b,{to:"/admin/expenses",className:"nav-link",children:[Object(a.jsx)("span",{"data-feather":"layers"}),"Expenses"]})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsxs)(W.b,{to:"/admin/debtors",className:"nav-link",children:[Object(a.jsx)("span",{"data-feather":"layers"}),"Debtors"]})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsxs)(W.b,{to:"/admin/summary",className:"nav-link",children:[Object(a.jsx)("span",{"data-feather":"layers"}),"Summary"]})})]})})})}c(83);function X(e){return function(t){Object(h.a)(s,t);var c=Object(u.a)(s);function s(e){var t;Object(j.a)(this,s),t=c.call(this,e);var a=B("currentUser");return a&&a.isAdmin||t.props.history.push("/"),t}return Object(b.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("div",{id:"main-wrapper",className:"show",children:[Object(a.jsx)(Q,Object(l.a)({},this.props)),Object(a.jsx)(J,{}),Object(a.jsx)("div",{className:"content-body",style:{minHeight:"100vh"},children:Object(a.jsx)("div",{className:"container-fluid",children:Object(a.jsx)(e,Object(l.a)({},this.props))})})]})}}]),s}(n.a.Component)}var Z=c(4);c(84);var $=function(e){var t=e.children;return Object(s.useEffect)((function(){return z()("body").addClass("modal-open"),function(){z()("body").removeClass("modal-open")}})),Object(a.jsx)("div",{className:"modal animate__animated animate__bounceInUp show",id:"basicModal",style:{display:"block",paddingRight:"19px"},children:Object(a.jsx)("div",{className:"modal-dialog",role:"document",children:Object(a.jsx)("div",{className:"modal-content",children:t})})})};var ee=function(e){var t=e.handleClose,c=Object(s.useState)({firstname:"",lastname:"",email:"",phone:"",password:""}),n=Object(Z.a)(c,2),r=n[0],i=n[1],d=function(e){i(Object(l.a)(Object(l.a)({},r),e))};return Object(a.jsx)($,{children:Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)("div",{className:"modal-header",children:Object(a.jsx)("div",{className:"h4 text-center",children:"New Admin"})}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstname",children:"First name"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter firstname",value:r.firstname,onChange:function(e){return d({firstname:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstname",children:"Last name"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter lastname",value:r.lastname,onChange:function(e){return d({lastname:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstname",children:"Phone Number"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter phone number",value:r.phone,onChange:function(e){return d({phone:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstname",children:"Email"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter email",value:r.email,onChange:function(e){return d({email:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstname",children:"Password"}),Object(a.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",value:r.password,onChange:function(e){return d({password:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstname",children:"Confirm Password"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Confirm password",value:r.confirm_password,onChange:function(e){return d({confirm_password:e.target.value})}})]}),Object(a.jsxs)("div",{className:"mt-2 mb-2 row justify-content-between pl-2 pr-2",children:[Object(a.jsx)("button",{className:"btn btn-secondary col-4",onClick:t,children:"Cancel"}),Object(a.jsx)("button",{className:"btn btn-primary col-4",onClick:function(){r.password!==r.confirm_password?o.b.error("The two passwords do not match"):F(r)?o.b.error("Do not leave fields empty"):Object(m.trackPromise)(g(y(v("admins",r),"Admin added successfully").then((function(e){t()}))))},children:"Save Admin"})]})]})]})})},te=X(function(e){Object(h.a)(c,e);var t=Object(u.a)(c);function c(e){var a;return Object(j.a)(this,c),(a=t.call(this,e)).updateShowAdmin=function(e){a.setState({showAddAdmin:e})},a.onDelete=function(e){Object(m.trackPromise)(g(y(v("admins/".concat(e.id,"/delete")),"Admin deleted successfully").then((function(e){return a.fetchAdmins()}))))},a.state={showAddAdmin:!1,admins:[]},a}return Object(b.a)(c,[{key:"fetchAdmins",value:function(){var e=this;Object(m.trackPromise)(g(y(N("admins")).then((function(t){var c=t.data;e.setState({admins:c})}))))}},{key:"componentDidMount",value:function(){this.fetchAdmins()}},{key:"render",value:function(){var e=this,t=this.state,c=t.showAddAdmin,s=t.admins;return Object(a.jsxs)("div",{className:"mt-3",children:[c&&Object(a.jsx)(ee,{handleClose:function(){e.updateShowAdmin(!1),e.fetchAdmins()}}),Object(a.jsx)("h2",{children:"Admins "}),Object(a.jsx)("div",{className:"w-100 row justify-content-end mb-2",children:Object(a.jsxs)("button",{className:"btn btn-info",onClick:function(){return e.updateShowAdmin(!0)},children:[Object(a.jsx)("i",{className:"fa fa-plus mr-2"}),"Add New"]})}),Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Phone Number"}),Object(a.jsx)("th",{children:"Email"}),Object(a.jsx)("th",{children:"Updated"})]})}),Object(a.jsx)("tbody",{children:s.map((function(t,c){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++c}),Object(a.jsx)("td",{children:t.firstname+" "+t.lastname}),Object(a.jsx)("td",{children:t.phone}),Object(a.jsx)("td",{children:t.email}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{title:q(t.updated_at),children:M(t.updated_at)})}),Object(a.jsx)("td",{children:Object(a.jsx)(O,{onClick:function(){return e.onDelete(t)},children:Object(a.jsx)("i",{className:"fa fa-trash"})})})]},t.id)}))})]})})]})}}]),c}(s.Component));function ce(e){var t=e.icon,c=e.title,s=e.displayValue,n=e.extraTitle,r=e.onClick;return Object(a.jsx)("div",{className:"col-xl-3 col-xxl-3 col-lg-6 col-md-6 col-sm-6 animate__animated animate__zoomInUp",onClick:r,children:Object(a.jsx)("div",{className:"widget-stat card",children:Object(a.jsx)("div",{className:"card-body p-4",children:Object(a.jsxs)("div",{className:"media ai-icon",children:[Object(a.jsx)("span",{className:"mr-3 bgl-primary text-primary",children:Object(a.jsx)("i",{className:t})}),Object(a.jsxs)("div",{className:"media-body",children:[Object(a.jsx)("h3",{className:"mb-0 text-black",children:Object(a.jsx)("span",{className:"counter ml-0",children:s})}),Object(a.jsx)("p",{className:"mb-0",children:c}),n?Object(a.jsx)("small",{children:n}):null]})]})})})})}function ae(e){var t=e.selectedPeriod,c=e.updatePeriod,s=Y(I),n=s.find((function(e){return e.value===t}));return n||(n=I.THIS_YEAR),Object(a.jsxs)("div",{className:"dropdown mt-3 mt-sm-0",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-primary dropdown-toggle light fs-14","data-toggle":"dropdown","aria-expanded":"false",children:n.display}),Object(a.jsx)("div",{className:"dropdown-menu",children:s.map((function(e){return Object(a.jsx)("button",{className:"dropdown-item",onClick:function(){return c(e.value)},children:e.display},e.value)}))})]})}function se(e){var t=e.bestSelling;return Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-xl-12",children:Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("div",{className:"card-header border-0 pb-0 d-sm-flex d-block",children:Object(a.jsx)("div",{children:Object(a.jsx)("h4",{className:"card-title mb-1",children:"Best Selling Items"})})}),Object(a.jsx)("div",{className:"card-body p-0 pt-3 border-top border-darken-1",children:t.map((function(e,t){return Object(a.jsxs)("div",{className:"media items-list-1",children:[Object(a.jsxs)("span",{className:"number col-1 px-0 align-self-center",children:["#",++t]}),Object(a.jsxs)("div",{className:"media-body col-sm-4 col-6 col-xxl-5 px-0",children:[Object(a.jsx)("h5",{className:"mt-0 mb-3",children:Object(a.jsx)("a",{className:"text-black",href:"ecom-product-detail.html",children:e.stock_name})}),Object(a.jsxs)("small",{className:"font-w500",children:[Object(a.jsxs)("strong",{className:"text-secondary mr-2",children:["Ksh ",e.amount]}),Object(a.jsx)("span",{className:"text-primary",children:e.category_name})]})]}),Object(a.jsx)("div",{className:"media-footer ml-auto col-3 px-0 d-flex align-self-center align-items-center",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{className:"mb-0 font-w600 text-black",children:e.count}),Object(a.jsx)("span",{className:"fs-14",children:"Sales "})]})})]},e.pricing)}))})]})})})}var ne=c(46),re=c.n(ne);function ie(e){var t=e.barSales,c=e.restaurantSales,n=e.period,r=Object(s.useState)(null),i=Object(Z.a)(r,2),l=i[0],d=i[1];return Object(s.useEffect)((function(){var e=function(){for(var e=[],a=[],s=[],r=0;r<t.length;r++)e.push(K(t[r].date,n)),a.push(t[r].count||0),s.push(c[r].count||0);return{labels:e,bar:a,restaurant:s}}();if(l){var a=l.options;a.series=[{name:"Bar",data:e.bar},{name:"Restaurant",data:e.restaurant}],a.xaxis={categories:e.labels},l.updateOptions(a,!1,!0)}else{var s={series:[{name:"Bar",data:e.bar},{name:"Restaurant",data:e.restaurant}],chart:{type:"area",height:350,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},colors:["#2f4cdd","#b519ec"],dataLabels:{enabled:!1},markers:{shape:"circle"},legend:{show:!0,fontSize:"12px",labels:{colors:"#000000"},position:"top",horizontalAlign:"left",markers:{width:19,height:19,strokeWidth:0,strokeColor:"#fff",fillColors:void 0,radius:4,offsetX:-5,offsetY:-5}},stroke:{show:!0,width:4,colors:["#2f4cdd","#b519ec"]},grid:{borderColor:"#eee"},xaxis:{categories:e.labels,labels:{style:{colors:"#3e4954",fontSize:"13px",fontFamily:"Poppins",fontWeight:100,cssClass:"apexcharts-xaxis-label"}},crosshairs:{show:!1}},yaxis:{labels:{style:{colors:"#3e4954",fontSize:"13px",fontFamily:"Poppins",fontWeight:100,cssClass:"apexcharts-xaxis-label"}}},fill:{opacity:1},tooltip:{y:{formatter:function(e){return e+" sales"}}}},r=new re.a(document.querySelector("#chartBar"),s);d(r),r.render()}}),[t,c]),Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("div",{className:"card-header border-0 pb-0 d-sm-flex d-block",children:Object(a.jsx)("div",{children:Object(a.jsx)("h4",{className:"card-title mb-1",children:"Sales"})})}),Object(a.jsx)("div",{className:"card-body revenue-chart px-3",children:Object(a.jsx)("div",{id:"chartBar"})})]})}var le=X(function(e){Object(h.a)(c,e);var t=Object(u.a)(c);function c(e){var a;return Object(j.a)(this,c),(a=t.call(this,e)).updateData=function(){var e=a.state.period;Object(m.trackPromise)(g(y(N(U("dashboard",{period:e}))).then((function(e){var t=e.data.totals;a.setState({totals:t})}))))},a.updateFilter=function(e){a.setState(Object(l.a)({},e),(function(){return a.updateData()}))},a.state={totals:{},period:I.THIS_YEAR.value},a}return Object(b.a)(c,[{key:"componentDidMount",value:function(){this.updateData()}},{key:"render",value:function(){var e=this,t=this.state,c=t.totals,s=t.period;return Object(a.jsxs)("div",{className:"mt-3 row",children:[Object(a.jsx)("div",{className:"w-100 row justify-content-end mb-2",children:Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)(ae,{selectedPeriod:s,updatePeriod:function(t){return e.updateFilter({period:t})}})})}),Object(a.jsx)(ce,{title:"Bar Sales",icon:"fa fa-glass-cheers",displayValue:c.bar_sales_count}),Object(a.jsx)(ce,{title:"Restaurant Sales",icon:"fa fa-utensils",displayValue:c.restaurant_sales_count}),Object(a.jsx)(ce,{title:c.restaurant_profit>0?"Gross Restaurant Profit":"Gross Restaurant Loss",icon:"fa fa-dollar",displayValue:Object(a.jsx)("span",{className:c.restaurant_profit>0?"text-success":"text-danger",children:Math.abs(c.restaurant_profit).toFixed(1)+"%"})}),Object(a.jsx)(ce,{title:c.bar_profit>0?"Gross Bar Profit":"Gross Bar Loss",icon:"fa fa-dollar",displayValue:Object(a.jsx)("span",{className:c.bar_profit>0?"text-success":"text-danger",children:Math.abs(c.bar_profit).toFixed(1)+"%"})}),Object(a.jsx)(ce,{title:"Bar Stock Worth",icon:"fa fa-dollar",displayValue:c.bar_stock_worth}),Object(a.jsx)(ce,{title:"Restaurant Stock Worth",icon:"fa fa-dollar",displayValue:c.restaurant_stock_worth}),Object(a.jsx)(ce,{title:Object(a.jsx)("span",{className:"text-danger",children:"Out of Stock!"}),icon:"fa fa-exclamation-triangle",displayValue:c.out_of_stock,extraTitle:"(Bar)"}),Object(a.jsx)(ce,{title:"Average Sales ",extraTitle:"Per day (Bar & Restaurant)",icon:"fa fa-cart-arrow-down",displayValue:Math.ceil(c.average_daily_sales)}),Object(a.jsx)("hr",{className:"w-100 border border-secondary"}),Object(a.jsx)("div",{className:"col-xl-6 col-xxl-6 col-lg-12 col-md-12 animate__animated animate__slideInLeft",children:Object(a.jsx)(ie,{barSales:c.bar_sales||[],restaurantSales:c.restaurant_sales||[],period:s})}),Object(a.jsx)("div",{className:"col-xl-6 col-xxl-6 col-lg-12  col-lg-9 col-md-12  animate__animated animate__slideInRight",children:Object(a.jsx)(se,{bestSelling:c.best_selling||[]})})]})}}]),c}(s.Component));c(85);function de(e){var t=e.item,c=e.onItemClick;return Object(a.jsxs)("div",{className:"item p-2 link mb-2",title:"Click to add",onClick:function(){return c(t)},children:[t.name,Object(a.jsx)("div",{className:"float-right",children:Object(a.jsx)("i",{className:"fa fa-plus"})})]})}var oe=function(e){var t=e.category,c=e.onItemClick;return Object(a.jsxs)("div",{className:"category shadow shadow-secondary p-2 mb-2",children:[Object(a.jsx)("h5",{className:"text-center text-uppercase mb-1",children:t.name}),t.goods.map((function(e){return Object(a.jsx)(de,{item:e,onItemClick:c})}))]})};c(86);var je=function(e){var t=e.place;return Object(a.jsxs)("div",{className:"employee-header w-100",children:[Object(a.jsx)("div",{className:"float-left pl-3 place-icon ",children:parseInt(t)===P?Object(a.jsx)("i",{className:"fas fa-glass-cheers"}):Object(a.jsx)("i",{className:"fas fa-utensils"})}),Object(a.jsxs)("div",{className:"dropdown float-right pr-3 dropleft",children:[Object(a.jsx)("button",{className:"btn bg-transparent dropdown-toggle ","data-toggle":"dropdown",children:Object(a.jsx)("i",{className:"fas fa-bars"})}),Object(a.jsxs)("div",{className:"dropdown-menu ","aria-labelledby":"dropdownMenuButton",children:[Object(a.jsx)(W.b,{className:"dropdown-item ",to:"/employee/sales/".concat(t),children:"Sales"}),Object(a.jsx)(W.b,{className:"dropdown-item ",to:"/employee",children:"Main Page"}),Object(a.jsx)(W.b,{className:"dropdown-item ",to:"/",children:"Logout"})]})]}),Object(a.jsx)("div",{className:"h3 text-center text-white",children:parseInt(t)===P?"SCRATCH BAR":"SCRATCH RESTAURANT"})]})};c(87);function be(e){var t=e.selectedItem,c=e.handleAddToCart,n=e.place,r=Object(s.useState)([]),i=Object(Z.a)(r,2),d=i[0],o=i[1],j=Object(s.useState)(0),b=Object(Z.a)(j,2),h=b[0],u=b[1],O=Object(s.useState)({quantity:1}),x=Object(Z.a)(O,2),p=x[0],f=x[1],v=B("currentUser");Object(s.useEffect)((function(){var e=t.id;e&&Object(m.trackPromise)(g(y(N("pricings?good="+e).then((function(e){var t=e.data.pricings;o(t),u(0)})))))}),[t.id]);var k=d.length&&d[h]||{};return t.name?Object(a.jsxs)("div",{className:"process-section",children:[Object(a.jsx)("h1",{className:"text-center text-dark text-uppercase mb-4",children:t.name}),parseInt(n)===P?Object(a.jsx)("p",{className:"text-center",children:Object(a.jsxs)("small",{className:"mt-2 text-secondary text-center ",children:["Remaining Quantity: ",k.quantity_remaining]})}):null,d.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h3",{className:"text-center text-dark text-uppercase mt-4",children:["Ksh ",k.amount]}),Object(a.jsxs)("div",{className:"add-subtract row justify-content-center",children:["count"===k.unit?null:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:"btn btn-light col-3",onClick:function(){h>0&&u(h-1)},children:Object(a.jsx)("i",{className:"fa fa-minus"})}),Object(a.jsx)("div",{className:"h4 text-center p-2 ml-1 mr-1",children:k.measure+" "+k.unit}),Object(a.jsx)("button",{className:"btn btn-light col-3",onClick:function(){h<d.length-1&&u(h+1)},children:Object(a.jsx)("i",{className:"fa fa-plus"})})]}),Object(a.jsx)("div",{className:"w-100"}),Object(a.jsxs)("div",{className:"form-group col-2 mt-3",children:[Object(a.jsx)("label",{htmlFor:"",children:"Quantity"}),Object(a.jsx)("input",{type:"\r ",className:"form-control ",value:p.quantity,onChange:function(e){return f(Object(l.a)(Object(l.a)({},p),{},{quantity:e.target.value}))}})]})]}),!k.quantity_remaining&&parseInt(n)===P||k.quantity_remaining&&parseInt(k.quantity_remaining)<parseInt(p.quantity)&&parseInt(n)===P?Object(a.jsxs)("div",{className:" badge badge-danger text-white p-1 w-100",children:[Object(a.jsx)("h1",{className:"text-center",children:"Oops !"}),Object(a.jsx)("h5",{className:"text-center",children:"This product is out of quantity!"})]}):Object(a.jsx)("div",{className:"mt-4 row justify-content-center",onClick:function(){var e=Object(l.a)(Object(l.a)({},p),{},{price:d[h]},t);c(e)},children:Object(a.jsx)("button",{className:"btn btn-primary text-uppercase p-2 col-6",children:"Add To Cart"})})]}):Object(a.jsxs)("div",{className:"add-subtract bg-danger text-white p-2",children:[Object(a.jsx)("h1",{className:"text-center",children:"Oops !"}),Object(a.jsx)("h5",{className:"text-center",children:"This product do not have pricing, please add pricing in the admin section"})]})]}):Object(a.jsxs)("div",{className:"process-section bg-secondary pb-4",children:[Object(a.jsxs)("h1",{className:"jumbotron jumbotron-fluid text-center bg-transparent  text-white ",children:["Hi there ",v.firstname,","]}),Object(a.jsx)("p",{className:"text-lead text-center text-warning",children:"Please choose an item in the menu to proceed"})]})}var he=c(47);function ue(e){var t=e.item,c=e.removeFromCart,n=e.useOnlinePrice,r=Object(s.useState)("Ksh 0"),i=Object(Z.a)(r,2),l=i[0],d=i[1];return Object(s.useEffect)((function(){d(L(n?t.price.online_price:t.price.amount,t.quantity))}),[t.quantity,t.price.online_price,t.price.amount,n]),Object(a.jsx)("div",{className:"item p-2  mb-2",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col text-left",children:t.name}),Object(a.jsx)("div",{className:"col text-center",children:H(t.price.unit,t.price.measure)}),Object(a.jsx)("div",{className:"col text-center",children:t.quantity}),Object(a.jsx)("div",{className:"col text-center",children:l}),Object(a.jsx)("div",{className:"col text-right link",onClick:function(){return c(t)},children:Object(a.jsx)("i",{className:"fa fa-times"})})]})})}function me(e){var t=e.handleCloseModal,c=e.handleSave,n=e.payment,r=Object(s.useState)({}),i=Object(Z.a)(r,2),d=i[0],o=i[1];Object(s.useEffect)((function(){n.creditor_name&&o({creditor_name:n.creditor_name,creditor_phone:n.creditor_phone,credit_reason:n.credit_reason,credit_amount:n.credit_amount})}),[n]);var j=function(e){o(Object(l.a)(Object(l.a)({},d),e))};return Object(a.jsx)($,{children:Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)("div",{className:"modal-header",children:Object(a.jsx)("div",{className:"h4 text-center",children:"Creditor Details"})}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Full Name"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"E.g John Doe",value:d.creditor_name,onChange:function(e){return j({creditor_name:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Phone Number"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"E.g  0702820251",value:d.creditor_phone,onChange:function(e){return j({creditor_phone:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Amount"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"E.g  200",value:d.credit_amount,onChange:function(e){return j({credit_amount:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Reason"}),Object(a.jsx)("textarea",{name:"",id:"",cols:"30",rows:"3",className:"form-control",placeholder:"Reason to give credit",value:d.credit_reason,onChange:function(e){return j({credit_reason:e.target.value})}})]}),Object(a.jsxs)("div",{className:"mt-2 mb-2 row justify-content-between pl-2 pr-2",children:[Object(a.jsx)("button",{className:"btn btn-secondary col-4",onClick:t,children:"Cancel"}),Object(a.jsx)("button",{className:"btn btn-primary col-4",onClick:function(){c(d),t()},children:"Done"})]})]})]})})}var Oe=function(e){var t=e.cartItems,c=e.removeFromCart,n=e.handleSale,r=e.place,i=e.payObj,d=Object(s.useState)(!1),o=Object(Z.a)(d,2),j=o[0],b=o[1],h=Object(s.useState)(!1),u=Object(Z.a)(h,2),m=u[0],O=u[1],x=Object(s.useState)(!1),p=Object(Z.a)(x,2),v=p[0],N=p[1],y=function(){if(t.length){var e=0;return t.forEach((function(t){if(j&&0===parseInt(t.price.online_price))return f("This good does not have online price. please add","error",null,"no-duplicate"),void b(!1);e+=(j?parseInt(t.price.online_price)*t.quantity:t.price.amount)*t.quantity})),e}return 0},g=function(){return L(y(),1)},k=Object(s.useState)({payment_method:E[0],transaction_code:"",total:g(),receiptWidth:parseInt(r)===P?D:A}),w=Object(Z.a)(k,2),C=w[0],_=w[1];return Object(s.useEffect)((function(){_(Object(l.a)(Object(l.a)({},C),i))}),[i.sale_id,i]),Object(s.useEffect)((function(){"Mpesa & Cash"==C.payment_method?O(!0):"Credit"==C.payment_method?(_(Object(l.a)(Object(l.a)({},C),{},{customer_pay:0,customer_change:0})),N(!0)):O(!1)}),[C.payment_method]),Object(a.jsxs)("div",{className:"card bg-transparent border-0",children:[v&&Object(a.jsx)(me,{handleCloseModal:function(){N(!1)},handleSave:function(e){_(Object(l.a)(Object(l.a)({},C),e))},payment:C}),Object(a.jsx)("h4",{className:"text-uppercase text-center mb-3",children:"Receipt"}),t.map((function(e){return Object(a.jsx)(ue,{item:e,removeFromCart:c,useOnlinePrice:j},e.id+e.price.amount)})),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col text-left",children:"PAYMENT METHOD"}),Object(a.jsx)("div",{className:"col text-center",children:Object(a.jsx)("select",{name:"",id:"",className:"form-control",value:C.payment_method,onChange:function(e){var t=e.target.value;_(Object(l.a)(Object(l.a)({},C),{},{payment_method:t}));var c=function(e){var t=Object(he.a)(E);return(t=function(e,t){var c=[];return t.forEach((function(t){e.find((function(e){return e===t}))||c.push(t)})),c}(["Credit","Mpesa","Cash","Card","Mpesa & Cash"],t)).includes(e)}(t);b(c)},children:E.map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}))})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col text-left",children:"SUB TOTAL"}),Object(a.jsx)("div",{className:"col text-center",children:g()})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col text-left",children:"ADDITIONAL CHARGES"}),Object(a.jsx)("div",{className:"col text-center",children:"Ksh 0"})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col text-left",children:"TOTAL"}),Object(a.jsx)("div",{className:"col text-center",children:g()})]}),("Mpesa"===C.payment_method||"Mpesa & Cash"===C.payment_method)&&Object(a.jsxs)("div",{className:"form-group  mt-3",children:[Object(a.jsx)("label",{htmlFor:"",children:"Transaction Code"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"OK749ZTL6Y",value:C.transaction_code,onChange:function(e){return _(Object(l.a)(Object(l.a)({},C),{},{transaction_code:e.target.value}))}})]}),m?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"form-group mt-3",children:[Object(a.jsx)("label",{htmlFor:"",children:"Mpesa amount"}),Object(a.jsx)("input",{type:"number",className:"form-control",placeholder:"E.g 300",value:C.mpesa_pay,onChange:function(e){return _(Object(l.a)(Object(l.a)({},C),{},{mpesa_pay:e.target.value}))}})]}),Object(a.jsxs)("div",{className:"form-group ",children:[Object(a.jsx)("label",{htmlFor:"",children:"Cash amount"}),Object(a.jsx)("input",{type:"number",className:"form-control",placeholder:"E.g 100",value:C.cash_pay,onChange:function(e){return _(Object(l.a)(Object(l.a)({},C),{},{cash_pay:e.target.value}))}})]})]}):Object(a.jsxs)("div",{className:"form-group  mt-3",children:[Object(a.jsx)("label",{htmlFor:"",children:"Customer Paid"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Amount customer paid",value:C.customer_pay,onChange:function(e){return _(Object(l.a)(Object(l.a)({},C),{},{customer_pay:e.target.value,customer_change:parseFloat(e.target.value)-y()}))}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Choose Printer"}),Object(a.jsxs)("select",{name:"",id:"",className:"form-control",value:C.receiptWidth,onChange:function(e){return _(Object(l.a)(Object(l.a)({},C),{},{receiptWidth:e.target.value}))},children:[Object(a.jsx)("option",{value:D,children:"Fusion Printer"}),Object(a.jsx)("option",{value:A,children:"Kitchen Printer"})]})]}),Object(a.jsxs)("div",{className:"mt-4 row justify-content-center ",children:["Credit"===C.payment_method&&C.creditor_name?Object(a.jsxs)("button",{className:"btn btn-dark text-uppercase p-1 mx-1",onClick:function(){return N(!0)},children:[Object(a.jsx)("i",{className:"fa fa-edit mr-2"}),"Edit Creditor"]}):null,Object(a.jsx)("button",{className:"btn btn-secondary text-uppercase p-1 mr-2",onClick:function(){return n(V(Object(l.a)(Object(l.a)({},C),{},{total:g(),sub_total:y(),continueToPrint:!1}),["cash_pay","mpesa_pay"]))},children:C.sale_id?"Edit":"Confirm"}),Object(a.jsxs)("button",{className:"btn btn-success text-uppercase p-1 ml-2",onClick:function(){return n(V(Object(l.a)(Object(l.a)({},C),{},{total:g(),sub_total:y(),continueToPrint:!0}),["cash_pay","mpesa_pay"]))},children:[C.sale_id?"Edit":"Confirm"," & Print"]})]})]})},xe=(c(88),c(89),c(26)),pe=c(21),fe=c.n(pe);function ve(e){var t=e.width,c=e.sale_id,n=Object(s.useState)([]),r=Object(Z.a)(n,2),i=r[0],l=r[1],d=Object(s.useState)({}),o=Object(Z.a)(d,2),j=o[0],b=o[1],h=Object(s.useState)(1),u=Object(Z.a)(h,2),O=u[0],x=u[1];Object(s.useEffect)((function(){var e="sales/cart-items/"+c;Object(m.trackPromise)(g(y(N(e)).then((function(e){l(e.data.cart_items),b(e.data.sale)}))))}),[c]);var p=function(){e.history.goBack()};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"ticket",style:{width:t,maxWidth:t},id:"receipt",children:[Object(a.jsxs)("p",{className:"centered",children:[Object(a.jsx)("span",{className:"titles",children:"SCRATCH KITCHEN LTD"}),Object(a.jsx)("br",{}),Object(a.jsx)("span",{className:"titles",children:1===O?"CUSTOMER BILL":"ORDER"}),Object(a.jsx)("br",{}),Object(a.jsx)("p",{style:{fontSize:"20px"},children:"P.O.BOX 102358-00101 NRB TELEPHONE: 0791 482 995/0756936852"}),Object(a.jsx)("br",{}),Object(a.jsx)("p",{id:"till-number",children:"Till No. 4028177"})]}),Object(a.jsxs)("table",{className:"my-4",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"description",children:"Description"}),Object(a.jsx)("th",{className:"quantity",children:"Q."}),Object(a.jsx)("th",{className:"price",children:"@"}),Object(a.jsx)("th",{className:"price",children:"S.T"})]})}),Object(a.jsxs)("tbody",{children:[i.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"description",children:e.name}),Object(a.jsx)("td",{className:"quantity",children:e.quantity}),Object(a.jsx)("td",{className:"price",children:e.price.amount}),Object(a.jsx)("td",{className:"price",children:e.price.amount*e.quantity})]},e.id)})),Object(a.jsxs)("tr",{style:{paddingTop:"30px",borderTop:"1px solid #000"},children:[Object(a.jsx)("td",{className:"description  totals",colSpan:"1",children:"Total"}),Object(a.jsx)("td",{className:"price  font-weight-bolder totals",colSpan:"2",children:j.total})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"description  text-uppercase",colSpan:"1",children:"Customer Pay"}),Object(a.jsx)("td",{className:"price  font-weight-bolder",colSpan:"2",children:j.customer_pay})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"description text-uppercase ",colSpan:"1",children:"Change"}),Object(a.jsx)("td",{className:"price  font-weight-bolder",colSpan:"2",children:j.customer_change})]})]})]}),Object(a.jsxs)("p",{className:"centered text-uppercase",style:{fontSize:"30px"},children:["Served by",Object(a.jsx)("br",{})," "+j.firstname+" "+j.lastname+" at "+q(j.created_at),Object(a.jsx)("br",{}),"askscratchkitchen@gmail.com",Object(a.jsx)("br",{}),"ig@scratchkitchen"]})]}),Object(a.jsxs)("div",{className:"justify-content-center  row hidden-print",style:{width:t,maxWidth:t},children:[Object(a.jsx)("button",{className:"btn btn-secondary ml-2",onClick:function(){return p()},children:"Back"}),Object(a.jsx)("button",{id:"btnPrint",className:"hidden-print btn btn-dark ml-5 print-computer",onClick:function(){x(1);for(var e=1;e<=2;e++)x(e),window.print();p()},children:"Print"}),Object(a.jsx)("button",{id:"btnPrint",className:"hidden-print btn btn-dark ml-5 print-android",onClick:function(){x(1);for(var e=function(e){x(e),fe()(document.getElementById("receipt")).then((function(t){var a=t.toDataURL("image/png"),s=new xe.a;s.addImage(a,"JPEG",0,0),s.save("receipt".concat(c,"-").concat(1===e?"bill":"order",".pdf"))}))},t=1;t<=2;t++)e(t)},children:"Download Pdf"})]})]})}var Ne=function(e){return function(t){Object(h.a)(s,t);var c=Object(u.a)(s);function s(){return Object(j.a)(this,s),c.apply(this,arguments)}return Object(b.a)(s,[{key:"render",value:function(){var t=B("currentUser");return!t||t.isAdmin?(this.props.history.push("/"),Object(a.jsx)(a.Fragment,{})):Object(a.jsx)(e,Object(l.a)({},this.props))}}]),s}(s.Component)};c(90);function ye(e){var t=e.width,c=e.sale_id,n=Object(s.useState)([]),r=Object(Z.a)(n,2),i=r[0],l=r[1],d=Object(s.useState)({}),o=Object(Z.a)(d,2),j=o[0],b=o[1],h=Object(s.useState)(1),u=Object(Z.a)(h,2),O=u[0],x=u[1];Object(s.useEffect)((function(){var e="sales/cart-items/"+c;Object(m.trackPromise)(g(y(N(e)).then((function(e){l(e.data.cart_items),b(e.data.sale)}))))}),[c]);var p=function(){e.history.goBack()};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"ticket",style:{width:t,maxWidth:t},id:"receipt",children:[Object(a.jsxs)("p",{className:"centered",children:[Object(a.jsx)("span",{className:"titles",children:"SCRATCH KITCHEN LTD"}),Object(a.jsx)("br",{}),Object(a.jsx)("span",{className:"titles",children:1===O?"CUSTOMER BILL":"ORDER"}),Object(a.jsx)("br",{}),Object(a.jsx)("p",{style:{fontSize:"13px"},children:"P.O.BOX 102358-00101 NRB TELEPHONE: 0791 482 995/0756936852"}),Object(a.jsx)("br",{}),Object(a.jsx)("p",{id:"till-number",children:"Till No. 4028177"})]}),Object(a.jsxs)("table",{className:"my-4",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"description",children:"Description"}),Object(a.jsx)("th",{className:"quantity",children:"Q."}),Object(a.jsx)("th",{className:"price",children:"@"}),Object(a.jsx)("th",{className:"price",children:"S.T"})]})}),Object(a.jsxs)("tbody",{children:[i.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"description",children:e.name}),Object(a.jsx)("td",{className:"quantity",children:e.quantity}),Object(a.jsx)("td",{className:"price",children:e.price.amount}),Object(a.jsx)("td",{className:"price",children:e.price.amount*e.quantity})]},e.id)})),Object(a.jsxs)("tr",{style:{paddingTop:"30px",borderTop:"1px solid #000"},children:[Object(a.jsx)("td",{className:"description  totals",colSpan:"1",children:"Total"}),Object(a.jsx)("td",{className:"price  font-weight-bolder totals",colSpan:"2",children:j.total})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"description  text-uppercase",colSpan:"1",children:"Customer Pay"}),Object(a.jsx)("td",{className:"price  font-weight-bolder",colSpan:"2",children:j.customer_pay})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"description text-uppercase ",colSpan:"1",children:"Change"}),Object(a.jsx)("td",{className:"price  font-weight-bolder",colSpan:"2",children:j.customer_change})]})]})]}),Object(a.jsxs)("p",{className:"centered text-uppercase",style:{fontSize:"20px"},children:["Served by"," "+j.firstname+" "+j.lastname+" at "+q(j.created_at),Object(a.jsx)("br",{}),"askscratchkitchen@gmail.com",Object(a.jsx)("br",{}),"ig@scratchkitchen"]})]}),Object(a.jsxs)("div",{className:"justify-content-center  row hidden-print",style:{width:t,maxWidth:t},children:[Object(a.jsx)("button",{className:"btn btn-secondary ml-2",onClick:function(){return p()},children:"Back"}),Object(a.jsx)("button",{id:"btnPrint",className:"hidden-print btn btn-dark ml-5 print-computer",onClick:function(){x(1);for(var e=1;e<=2;e++)x(e),window.print();p()},children:"Print"}),Object(a.jsx)("button",{id:"btnPrint",className:"hidden-print btn btn-dark ml-5 print-android",onClick:function(){x(1);for(var e=function(e){x(e),fe()(document.getElementById("receipt")).then((function(t){var a=t.toDataURL("image/png"),s=new xe.a;s.addImage(a,"JPEG",0,0),s.save("receipt".concat(c,"-").concat(1===e?"bill":"order",".pdf"))}))},t=1;t<=2;t++)e(t)},children:"Download Pdf"})]})]})}var ge=Ne(function(e){Object(h.a)(c,e);var t=Object(u.a)(c);function c(e){var a;return Object(j.a)(this,c),(a=t.call(this,e)).handleChangeCategory=function(e){a.setState({selectedCategoryId:e.target.value},(function(){return a.getFilteredCategories()}))},a.handleSearch=function(e){a.setState({q:e.target.value},(function(){return a.getFilteredCategories()}))},a.onItemClick=function(e){a.setState({selectedItem:e})},a.handleAddToCart=function(e){var t=a.state.cartItems,c=t.findIndex((function(t){return t.id===e.id&&e.price.measure===t.price.measure}));c>=0?(f("Item updated in the cart","success","bottom-right"),t[c]=e):(f("Item added to cart","success","bottom-right"),t.push(e)),a.setState({cartItems:t})},a.removeFromCart=function(e){var t=a.state.cartItems,c=t.findIndex((function(t){return t.id===e.id&&e.price.measure===t.price.measure}));c>=0&&(t.splice(c,1),f("Item removed from cart","warning","bottom-right"),a.setState(t))},a.handleSale=function(e){var t=a.state.cartItems,c=B("currentUser"),s=e.continueToPrint,n=e.sale_id,r="sales",i="sales/history",d="Sale made successfully";n&&(r="sales/".concat(n,"/edit"),i="sales/".concat(n,"/history/edit"),d="Sale edited successfully"),Object(m.trackPromise)(g(y(v(r,Object(l.a)(Object(l.a)({},e),{},{sold_by:"".concat(c.id),sold_goods:t.length,sold_by_text:"".concat(c.firstname," ").concat(c.lastname)})).then((function(n){var r=n.data.sale;a.setState({payment:Object(l.a)(Object(l.a)({},r),{},{sold_by_text:"".concat(c.firstname," ").concat(c.lastname),receiptWidth:e.receiptWidth})});var o=[],j=[],b=[],h=[],u=[];t.forEach((function(e){o.push(e.id),j.push(parseInt(e.quantity)),b.push(H(e.price.unit,e.price.measure)),h.push("Ksh ".concat(e.price.amount)),u.push(e.price.id)})),Object(m.trackPromise)(g(y(v(i,{goods:o,quantities:j,prices:h,measures:b,sale_id:r.id,sold_by:"".concat(c.firstname," ").concat(c.lastname),ids:u}),d).then((function(t){s?a.props.match.params.id==P?a.props.history.push(U("/employee/print-bar",{sale_id:r.id,width:e.receiptWidth})):a.props.history.push(U("/employee/print",{sale_id:r.id,width:e.receiptWidth})):a.onAfterPrint()}))))})))))},a.onAfterPrint=function(){var e=a.props.match.params.id;a.setState({selectedItem:{},cartItems:[],payment:{},showPrint:!1}),a.props.history.push("/employee/dashboard/"+e)},a.state={categories:[],filteredCategories:[],selectedCategoryId:"",q:"",selectedItem:{},cartItems:[],payment:{},showPrint:!1,saleId:""},a.receiptRef=n.a.createRef(),a}return Object(b.a)(c,[{key:"componentDidMount",value:function(){var e=this;this.getCategories();var t=this.props.match.params.sale_id;if(t){this.setState({saleId:t});var c="sales/cart-items/"+t;Object(m.trackPromise)(g(y(N(c)).then((function(t){var c=t.data.cart_items,a=t.data.sale,s={payment_method:a.payment_method,customer_pay:a.customer_pay,transaction_code:a.transaction_code,sale_id:a.id,customer_change:a.customer_change,mpesa_pay:a.mpesa_pay,cash_pay:a.cash_pay};e.setState({cartItems:c,payment:s})}))))}}},{key:"getCategories",value:function(){var e=this,t=U("categories",{place:this.props.match.params.id});Object(m.trackPromise)(g(y(N(t)).then((function(t){var c=t.data.categories;e.setState({categories:c,filteredCategories:c})}))))}},{key:"getFilteredCategories",value:function(){var e=this,t=this.state;g(y(N(U("categories/filtered",{category:t.selectedCategoryId},{q:t.q},{place:this.props.match.params.id}))).then((function(t){e.setState({filteredCategories:t.data.categories})})))}},{key:"render",value:function(){var e=this,t=this.state,c=t.categories,s=t.filteredCategories,n=t.q,r=t.selectedItem,i=t.cartItems,l=t.payment,d=t.showPrint,o=this.props.match.params.id;return d?Object(a.jsx)(ve,{cartItems:i,payment:l,printReceipt:this.printReceipt,onAfterPrint:this.onAfterPrint}):Object(a.jsx)("div",{className:"container-fluid hidden-print",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)(je,{place:o}),Object(a.jsxs)("div",{className:"col-md-12 row mt-2 justify-content-center",children:[Object(a.jsxs)("div",{className:"col-sm  side-part p-2 section",children:[Object(a.jsxs)("div",{className:"input-group mb-3",children:[Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Search anything","aria-label":"Recipient's username","aria-describedby":"basic-addon2",value:n,onChange:this.handleSearch}),Object(a.jsx)("div",{className:"input-group-append",children:Object(a.jsx)("button",{className:"btn btn-outline-secondary",type:"button",children:Object(a.jsx)("i",{className:"fa fa-search"})})})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"category",children:"Select Category"}),Object(a.jsxs)("select",{name:"\r ",id:"",className:"form-control",onChange:this.handleChangeCategory,children:[Object(a.jsx)("option",{value:"",children:"All Categories"}),c.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),s.map((function(t){return t.goods.length?Object(a.jsx)(oe,{category:t,onItemClick:e.onItemClick},t.id):null}))]}),Object(a.jsx)("div",{className:"col-sm border-right border-dark border-left border-dark section",children:Object(a.jsx)(be,{selectedItem:r,handleAddToCart:this.handleAddToCart,place:o})}),Object(a.jsx)("div",{className:"col-sm",children:Object(a.jsx)(Oe,{cartItems:i,removeFromCart:this.removeFromCart,handleSale:this.handleSale,place:o,payObj:l})})]})]})})}}]),c}(s.Component));var ke=function(e){var t=e.handleClose,c=Object(s.useState)({firstname:"",lastname:"",email:"",phone:"",password:""}),n=Object(Z.a)(c,2),r=n[0],i=n[1],d=function(e){i(Object(l.a)(Object(l.a)({},r),e))};return Object(a.jsx)($,{children:Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)("div",{className:"modal-header",children:Object(a.jsx)("div",{className:"h4 text-center",children:"New Employee"})}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstname",children:"First name"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter firstname",value:r.firstname,onChange:function(e){return d({firstname:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstname",children:"Last name"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter lastname",value:r.lastname,onChange:function(e){return d({lastname:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstname",children:"Phone Number"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter phone number",value:r.phone,onChange:function(e){return d({phone:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstname",children:"Email"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter email",value:r.email,onChange:function(e){return d({email:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstname",children:"Password"}),Object(a.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",value:r.password,onChange:function(e){return d({password:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstname",children:"Confirm Password"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Confirm password",value:r.confirm_password,onChange:function(e){return d({confirm_password:e.target.value})}})]}),Object(a.jsxs)("div",{className:"mt-2 mb-2 row justify-content-between pl-2 pr-2",children:[Object(a.jsx)("button",{className:"btn btn-secondary col-4",onClick:t,children:"Cancel"}),Object(a.jsx)("button",{className:"btn btn-primary col-4",onClick:function(){r.password!==r.confirm_password?o.b.error("The two passwords do not match"):F(r)?o.b.error("Do not leave fields empty"):Object(m.trackPromise)(g(y(v("employees",r),"Employee added successfully").then((function(e){t()}))))},children:"Save Employee"})]})]})]})})},we=X(function(e){Object(h.a)(c,e);var t=Object(u.a)(c);function c(e){var a;return Object(j.a)(this,c),(a=t.call(this,e)).updateShowAdmin=function(e){a.setState({showAddEmployee:e})},a.onDelete=function(e){Object(m.trackPromise)(g(y(v("employees/".concat(e.id,"/delete")),"Employee deleted successfully").then((function(e){return a.fetchEmployees()}))))},a.state={showAddEmployee:!1,employees:[]},a}return Object(b.a)(c,[{key:"fetchEmployees",value:function(){var e=this;Object(m.trackPromise)(g(y(N("employees")).then((function(t){var c=t.data;e.setState({employees:c})}))))}},{key:"componentDidMount",value:function(){this.fetchEmployees()}},{key:"render",value:function(){var e=this,t=this.state,c=t.showAddEmployee,s=t.employees;return Object(a.jsxs)("div",{className:"mt-3",children:[c&&Object(a.jsx)(ke,{handleClose:function(){e.updateShowAdmin(!1),e.fetchEmployees()}}),Object(a.jsx)("h2",{children:"Employees "}),Object(a.jsx)("div",{className:"w-100 row justify-content-end mb-2",children:Object(a.jsxs)("button",{className:"btn btn-info",onClick:function(){return e.updateShowAdmin(!0)},children:[Object(a.jsx)("i",{className:"fa fa-plus mr-2"}),"Add New"]})}),Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Phone Number"}),Object(a.jsx)("th",{children:"Email"}),Object(a.jsx)("th",{children:"Updated"})]})}),Object(a.jsx)("tbody",{children:s.map((function(t,c){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++c}),Object(a.jsx)("td",{children:t.firstname+" "+t.lastname}),Object(a.jsx)("td",{children:t.phone}),Object(a.jsx)("td",{children:t.email}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{title:q(t.updated_at),children:M(t.updated_at)})}),Object(a.jsx)("td",{children:Object(a.jsx)(O,{onClick:function(){return e.onDelete(t)},children:Object(a.jsx)("i",{className:"fa fa-trash"})})})]},t.id)}))})]})})]})}}]),c}(s.Component)),Ce=function(e){Object(h.a)(c,e);var t=Object(u.a)(c);function c(e){var a;return Object(j.a)(this,c),(a=t.call(this,e)).updatePropChange=function(e){a.setState({user:Object(l.a)(Object(l.a)({},a.state.user),e)})},a.handleLogin=function(){var e=a.state.user,t="admins/login",c="/admin",s=e.level===_;s||(t="employees/login",c="/employee"),Object(m.trackPromise)(g(y(v(t,e),"Login successful").then((function(e){var t,n,r=e.data.user;t="currentUser",n=Object(l.a)(Object(l.a)({},r),{},{isAdmin:s}),localStorage.setItem(t,JSON.stringify(n)),a.props.history.push(c)}))))},a.state={user:{level:C}},a}return Object(b.a)(c,[{key:"componentDidMount",value:function(){R("currentUser")}},{key:"render",value:function(){var e=this,t=this.state.user;return Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("div",{className:"row justify-content-center",children:Object(a.jsx)("div",{className:"card shadow shadow-secondary mt-4",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("h1",{className:"jumbotron jumbotron-fluid bg-transparent",children:"SCRATCH KITCHEN"}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{className:"form-group row justify-content-center",children:Object(a.jsxs)("div",{className:"btn-group col-12",role:"group","aria-label":"Basic example",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-".concat(t.level===C?"white border-dark":"dark"),onClick:function(){return e.updatePropChange({level:_})},children:"Admin"}),Object(a.jsx)("button",{type:"button",className:"btn btn-".concat(t.level===_?"white border-dark":"dark"),onClick:function(){return e.updatePropChange({level:C})},children:"Employee"})]})}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter email",onChange:function(t){return e.updatePropChange({email:t.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Password"}),Object(a.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",onChange:function(t){return e.updatePropChange({password:t.target.value})}})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{className:"row justify-content-center",children:Object(a.jsx)("button",{className:"btn btn-primary col-6",onClick:this.handleLogin,children:"Login"})})]})})})})}}]),c}(s.Component);function _e(e){var t=e.handleClose,c=Object(s.useState)({}),n=Object(Z.a)(c,2),r=n[0],i=n[1];return Object(a.jsxs)($,{children:[Object(a.jsx)("div",{className:"modal-header",children:Object(a.jsx)("div",{className:"h4 text-center",children:"Add Category"})}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Type"}),Object(a.jsxs)("select",{name:"",id:"",className:"form-control",onChange:function(e){return i(Object(l.a)(Object(l.a)({},r),{},{place:e.target.value}))},children:[Object(a.jsx)("option",{value:"",children:"Select Type"}),Object(a.jsx)("option",{value:P,children:"Bar"}),Object(a.jsx)("option",{value:S,children:"Restaurant"})]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Name"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter name ",value:r.name,onChange:function(e){return i(Object(l.a)(Object(l.a)({},r),{},{name:e.target.value}))}})]}),Object(a.jsxs)("div",{className:"mt-2 mb-2 row justify-content-between pl-2 pr-2",children:[Object(a.jsx)("button",{className:"btn btn-secondary col-4",onClick:t,children:"Cancel"}),Object(a.jsx)("button",{className:"btn btn-primary col-4",onClick:function(){Object(m.trackPromise)(g(y(v("categories",r),"Category added successfully").then((function(e){return t()}))))},children:"Save Category"})]})]})]})}var Se=X(function(e){Object(h.a)(c,e);var t=Object(u.a)(c);function c(e){var a;return Object(j.a)(this,c),(a=t.call(this,e)).updateShowAddCategory=function(e){a.setState({showAddCategory:e})},a.onDelete=function(e){Object(m.trackPromise)(g(y(v("categories/".concat(e.id,"/delete")),"Category deleted successfully").then((function(e){return a.fetchCategories()}))))},a.state={categories:[]},a}return Object(b.a)(c,[{key:"fetchCategories",value:function(){var e=this;Object(m.trackPromise)(g(y(N("categories")).then((function(t){e.setState({categories:t.data.categories})}))))}},{key:"componentDidMount",value:function(){this.fetchCategories()}},{key:"render",value:function(){var e=this,t=this.state,c=t.showAddCategory,s=t.categories;return Object(a.jsxs)("div",{className:"mt-3",children:[c&&Object(a.jsx)(_e,{handleClose:function(){e.updateShowAddCategory(!1),e.fetchCategories()}}),Object(a.jsx)("h2",{children:"Categories "}),Object(a.jsx)("div",{className:"w-100 row justify-content-end mb-2",children:Object(a.jsxs)("button",{className:"btn btn-info",onClick:function(){return e.updateShowAddCategory(!0)},children:[Object(a.jsx)("i",{className:"fa fa-plus mr-2"}),"Add New"]})}),Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Type"}),Object(a.jsx)("th",{children:"Created"}),Object(a.jsx)("th",{children:"Updated"})]})}),Object(a.jsx)("tbody",{children:s.map((function(t,c){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++c}),Object(a.jsx)("td",{children:Object(a.jsx)(W.b,{to:"/admin/products/".concat(t.id),className:"link",children:t.name})}),Object(a.jsx)("td",{children:t.place===P?"Bar":"Restaurant"}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{title:q(t.created_at),children:M(t.created_at)})}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{title:q(t.updated_at),children:M(t.updated_at)})}),Object(a.jsx)("td",{children:Object(a.jsx)(O,{onClick:function(){return e.onDelete(t)},children:Object(a.jsx)("i",{className:"fa fa-trash"})})})]},t.id)}))})]})})]})}}]),c}(s.Component));function Pe(e){var t=e.handleClose,c=e.category,n=Object(s.useState)({}),r=Object(Z.a)(n,2),i=r[0],d=r[1];return Object(a.jsxs)($,{children:[Object(a.jsx)("div",{className:"modal-header",children:Object(a.jsx)("div",{className:"h4 text-center",children:"Add Product"})}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Name"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter name ",value:i.name,onChange:function(e){return d(Object(l.a)(Object(l.a)({},i),{},{name:e.target.value}))}})]}),Object(a.jsxs)("div",{className:"mt-2 mb-2 row justify-content-between pl-2 pr-2",children:[Object(a.jsx)("button",{className:"btn btn-secondary col-4",onClick:t,children:"Cancel"}),Object(a.jsx)("button",{className:"btn btn-primary col-4",onClick:function(){Object(m.trackPromise)(g(y(v("products",Object(l.a)(Object(l.a)({},i),{},{category:c})),"Product added successfully").then((function(e){return t()}))))},children:"Save Product"})]})]})]})}var Ee=X(function(e){Object(h.a)(c,e);var t=Object(u.a)(c);function c(e){var a;return Object(j.a)(this,c),(a=t.call(this,e)).updateShowAddProduct=function(e){a.setState({showAddProduct:e})},a.onDelete=function(e){Object(m.trackPromise)(g(y(v("products/".concat(e.id,"/delete")),"Product deleted successfully").then((function(e){return a.fetchProducts()}))))},a.state={showAddProduct:!1,products:[],category:{}},a}return Object(b.a)(c,[{key:"componentDidMount",value:function(){this.fetchProducts()}},{key:"fetchProducts",value:function(){var e=this,t=this.props.match.params.id;Object(m.trackPromise)(g(y(N("products?category=".concat(t))).then((function(t){var c=t.data,a=c.products,s=c.category;e.setState({products:a,category:s})}))))}},{key:"render",value:function(){var e=this,t=this.state,c=t.showAddProduct,s=t.products,n=t.category;return Object(a.jsxs)("div",{className:"mt-3",children:[c&&Object(a.jsx)(Pe,{handleClose:function(){e.updateShowAddProduct(!1),e.fetchProducts()},category:this.props.match.params.id}),Object(a.jsx)("h2",{children:"Products (".concat(n.name,")")}),Object(a.jsx)("div",{className:"w-100 row justify-content-end mb-2",children:Object(a.jsxs)("button",{className:"btn btn-info",onClick:function(){return e.updateShowAddProduct(!0)},children:[Object(a.jsx)("i",{className:"fa fa-plus mr-2"}),"Add New"]})}),Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Created"}),Object(a.jsx)("th",{children:"Updated"})]})}),Object(a.jsx)("tbody",{children:s.map((function(t,c){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++c}),Object(a.jsx)("td",{children:Object(a.jsx)(W.b,{to:"/admin/products/".concat(t.id,"/pricing"),className:"link",children:t.name})}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{title:q(t.created_at),children:M(t.created_at)})}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{title:q(t.updated_at),children:M(t.updated_at)})}),Object(a.jsx)("td",{children:Object(a.jsx)(O,{onClick:function(){return e.onDelete(t)},children:Object(a.jsx)("i",{className:"fa fa-trash"})})})]})}))})]})})]})}}]),c}(s.Component)),Ae=X(function(e){Object(h.a)(c,e);var t=Object(u.a)(c);function c(e){var s;return Object(j.a)(this,c),(s=t.call(this,e)).updatePropChange=function(e){s.setState({selectedPricing:Object(l.a)(Object(l.a)({},s.state.selectedPricing),e)})},s.addPricing=function(){var e=s.state.selectedPricing,t=s.props.match.params.id,c=B("currentUser")||{},a="pricings",n="Price added successfully";e.id&&(a="pricings/".concat(e.id,"/edit"),n="Price updated successfully"),e.good=t,Object(m.trackPromise)(g(y(v(a,Object(l.a)(Object(l.a)({},e),{},{updated_by:"".concat(c.firstname," ").concat(c.lastname)})),n).then((function(e){s.setState({selectedPricing:{}}),s.getPricings()}))))},s.showEditPricing=function(e){s.setState({selectedPricing:e})},s.onDelete=function(e){Object(m.trackPromise)(g(y(v("pricings/".concat(e.id,"/delete"))).then((function(e){return s.getPricings()}))))},s.displayProfileLossBadge=function(e,t){var c=(t-e)/e*100,s="badge badge-danger ml-2",n="loss";return c>=0&&(s=" badge badge-success ml-2",n="profit"),Object(a.jsx)("span",{className:s,children:Math.abs(c.toFixed(2))+"% "+n})},s.state={pricings:[],selectedPricing:{},good:{}},s}return Object(b.a)(c,[{key:"getPricings",value:function(){var e=this,t=this.props.match.params.id;if(!t)return o.b.warn("The good id is required to view this page"),void this.props.history.goBack();Object(m.trackPromise)(g(y(N("pricings?good="+t)).then((function(t){var c=t.data.pricings,a=t.data.good;e.setState({pricings:c,good:a})}))))}},{key:"componentDidMount",value:function(){this.getPricings()}},{key:"render",value:function(){var e=this,t=this.state,c=t.pricings,s=t.selectedPricing,n=t.good;return Object(a.jsxs)("div",{className:"mt-3",children:[Object(a.jsxs)("h2",{children:["Pricing (".concat(n.name,")")," "]}),Object(a.jsx)("div",{className:"card",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Unit"}),Object(a.jsxs)("select",{name:"",id:"",className:"form-control",onChange:function(t){return e.updatePropChange({unit:t.target.value})},value:s.unit||"",children:[Object(a.jsx)("option",{value:"",children:"Select Unit"}),Object(a.jsx)("option",{value:"ml",children:"ML"}),Object(a.jsx)("option",{value:"kg",children:"KG"}),Object(a.jsx)("option",{value:"count",children:"Count"})]})]}),Object(a.jsxs)("div",{className:"form-group ml-1",children:[Object(a.jsxs)("label",{htmlFor:"",children:["Measure - ",s.unit]}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Eg 1/4",value:s.measure||"",onChange:function(t){return e.updatePropChange({measure:t.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group ml-1",children:[Object(a.jsx)("label",{htmlFor:"",children:"Buying Price"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:" Eg 200",value:s.buying_price||"",onChange:function(t){return e.updatePropChange({buying_price:t.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group ml-1",children:[Object(a.jsx)("label",{htmlFor:"",children:"Retail Price"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:" Eg 300",value:s.amount||"",onChange:function(t){return e.updatePropChange({amount:t.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group ml-1",children:[Object(a.jsx)("label",{htmlFor:"",children:"Online Price"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:" Eg 400",value:s.online_price||"",onChange:function(t){return e.updatePropChange({online_price:t.target.value})}})]}),Object(a.jsx)("div",{className:"form-group ml-2 mt-2 ",children:Object(a.jsxs)("button",{className:"btn btn-primary mt-4 w-100",onClick:this.addPricing,children:[s.id?Object(a.jsx)("i",{className:"fa fa-edit mr-2"}):Object(a.jsx)("i",{className:"fa fa-plus mr-2"}),s.id?"Update":"Add"]})})]})})}),Object(a.jsx)("div",{className:"card mt-3",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Measure"}),Object(a.jsx)("th",{children:"Buying Price"}),Object(a.jsx)("th",{children:"Retail Price"}),Object(a.jsx)("th",{children:"Online Price"}),Object(a.jsx)("th",{children:"Created"}),Object(a.jsx)("th",{children:"Updated"})]})}),Object(a.jsx)("tbody",{children:c.map((function(t,c){return Object(a.jsxs)("tr",{className:"link",children:[Object(a.jsx)("td",{children:++c}),Object(a.jsx)("td",{children:H(t.unit,t.measure)}),Object(a.jsx)("td",{children:"Ksh "+t.buying_price}),Object(a.jsxs)("td",{children:["Ksh "+t.amount,e.displayProfileLossBadge(t.buying_price,t.amount)]}),Object(a.jsxs)("td",{children:["Ksh "+t.online_price,e.displayProfileLossBadge(t.buying_price,t.online_price)]}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{title:q(t.created_at),children:M(t.created_at)})}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{title:q(t.updated_at),children:M(t.updated_at)})}),Object(a.jsx)("td",{children:Object(a.jsxs)("div",{className:"d-flex justify-content-around w-75",children:[Object(a.jsx)(O,{onClick:function(){return e.onDelete(t)},children:Object(a.jsx)("i",{className:"fa fa-trash"})}),Object(a.jsx)(O,{onClick:function(){return e.showEditPricing(t)},children:Object(a.jsx)("i",{className:"fa fa-edit"})})]})})]},t.id)}))})]})})})})]})}}]),c}(s.Component));var De=Ne((function(e){return Object(a.jsxs)("div",{className:"row",style:{alignItems:"center",justifyContent:"center",height:"50vh",marginTop:"15vh"},children:[Object(a.jsx)("h1",{className:"jumbotron-fluid bg-transparent text-center col-12",children:"Menu"}),Object(a.jsx)("div",{className:"col-md-8 pt-4 shadow shadow-dark   link emp-menu",style:{height:"75px"},onClick:function(){return e.history.push("/employee/dashboard/".concat(P))},children:Object(a.jsxs)("h5",{children:["Bar ",Object(a.jsx)("i",{className:"float-right fas fa-glass-cheers"})]})}),Object(a.jsx)("div",{className:"col-md-8 pt-4 shadow shadow-dark   link emp-menu",style:{height:"75px"},onClick:function(){return e.history.push("/employee/dashboard/".concat(S))},children:Object(a.jsxs)("h5",{children:["Restaurant ",Object(a.jsx)("i",{className:"float-right fas fa-utensils"})]})}),Object(a.jsx)("div",{className:"col-md-8 pt-4 shadow shadow-dark   link emp-menu",style:{height:"75px"},onClick:function(){return e.history.push("/employee/sales/".concat(S))},children:Object(a.jsxs)("h5",{children:["Sale History ",Object(a.jsx)("i",{className:"float-right fas fa-history"})]})}),Object(a.jsx)("div",{className:"col-md-8 pt-4 shadow shadow-dark   link emp-menu",style:{height:"75px"},onClick:function(){return e.history.push("/employee/stock")},children:Object(a.jsxs)("h5",{children:["Stock ",Object(a.jsx)("i",{className:"float-right fas fa-cart-plus"})]})})]})}));function Te(e){var t=e.currentUser,c=e.period,n=Object(s.useState)([]),r=Object(Z.a)(n,2),i=r[0],l=r[1],d=function(){Object(m.trackPromise)(g(y(N(U("creditors",{employee_id:t.id,period:c}))).then((function(e){l(e.data.creditors)}))))};return Object(s.useEffect)(d,[c,t.id]),Object(a.jsxs)("div",{className:"card w-100",children:[Object(a.jsx)("div",{className:"card-header",children:Object(a.jsx)("h1",{children:"Creditors"})}),Object(a.jsx)("div",{className:"card-body",children:Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Amount"}),Object(a.jsx)("th",{children:"Reason"}),Object(a.jsx)("th",{children:"Updated At"}),Object(a.jsx)("th",{children:"Status"}),Object(a.jsx)("th",{children:"Action"})]})}),Object(a.jsx)("tbody",{children:i.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++t}),Object(a.jsxs)("td",{children:[Object(a.jsx)("b",{children:e.creditor_name}),Object(a.jsx)("br",{}),e.creditor_phone]}),Object(a.jsx)("td",{children:e.credit_amount}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{className:"text-wrap",children:e.credit_reason})}),Object(a.jsx)("td",{children:q(e.updated_at)}),Object(a.jsx)("td",{children:e.is_cleared?Object(a.jsx)("span",{className:"badge badge-success",children:"Cleared"}):Object(a.jsx)("span",{className:"badge badge-warning",children:"Pending"})}),Object(a.jsxs)("td",{children:[!e.is_cleared&&Object(a.jsx)("button",{className:"btn btn-success mx-1",onClick:function(){return t=e,void Object(m.trackPromise)(g(y(v("creditors/clear",{credit_id:t.id,is_cleared:!t.is_cleared}),"Credit Cleared successfully").then((function(e){d()}))));var t},children:"Clear"}),Object(a.jsx)(W.b,{to:"/employee/sales/view/".concat(e.sale_id),className:"btn btn-dark mx-1",children:"View Sale"})]})]},e.id)}))})]})})})]})}function Ie(e){var t=e.currentUser,c=e.period,n=Object(s.useState)(!1),r=Object(Z.a)(n,2),i=r[0],l=r[1],d=Object(s.useState)([]),o=Object(Z.a)(d,2),j=o[0],b=o[1],h=function(){l(!i)},u=function(){Object(m.trackPromise)(g(y(N(U("expenses",{employee_id:t.id,period:c}))).then((function(e){b(e.data.expenses)}))))};Object(s.useEffect)(u,[t,c]);return Object(a.jsxs)("div",{className:"card w-100",children:[i&&Object(a.jsx)(Fe,{currentUser:t,handleCloseModal:h,updateData:u}),Object(a.jsx)("div",{className:"card-header",children:Object(a.jsxs)("h1",{className:"w-100",children:["Expenses",Object(a.jsxs)("button",{className:"btn btn-info float-right",onClick:h,children:[Object(a.jsx)("i",{className:"fa fa-plus mr-2"}),"Add Expense"]})]})}),Object(a.jsx)("div",{className:"card-body",children:Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Description"}),Object(a.jsx)("th",{children:"Amount"}),Object(a.jsx)("th",{children:"Created"}),Object(a.jsx)("th",{children:"Updated"}),Object(a.jsx)("th",{children:"Action"})]})}),Object(a.jsx)("tbody",{children:j.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++t}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{className:"text-wrap",children:e.expense_description})}),Object(a.jsx)("td",{children:e.expense_amount}),Object(a.jsx)("td",{title:q(e.created_at),children:M(e.created_at)}),Object(a.jsx)("td",{title:q(e.updated_at),children:M(e.updated_at)}),Object(a.jsx)("td",{children:Object(a.jsxs)("button",{className:"btn btn-danger",onClick:function(){return function(e){Object(m.trackPromise)(g(y(v("expenses/delete",{expense_id:e.id}),"Expense deleted successfully").then((function(e){return u()}))))}(e)},children:[Object(a.jsx)("i",{className:"fa fa-trash mr-2"}),"Delete"]})})]},e.id)}))})]})})})]})}function Fe(e){var t=e.handleCloseModal,c=e.currentUser,n=e.updateData,r=Object(s.useState)({}),i=Object(Z.a)(r,2),d=i[0],o=i[1];Object(s.useEffect)((function(){o({employee_id:c.id})}),[c]);return Object(a.jsx)($,{children:Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)("div",{className:"modal-header",children:Object(a.jsx)("div",{className:"h4 text-center",children:"Expense Details"})}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Expense Amount"}),Object(a.jsx)("input",{type:"number",className:"form-control",placeholder:"E.g 400",value:d.expense_amount,onChange:function(e){return o(Object(l.a)(Object(l.a)({},d),{},{expense_amount:e.target.value}))}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Expense Description"}),Object(a.jsx)("textarea",{name:"",id:"",cols:"30",rows:"3",className:"form-control",placeholder:"E.g Payment for motorbike",value:d.expense_description,onChange:function(e){return o(Object(l.a)(Object(l.a)({},d),{},{expense_description:e.target.value}))}})]}),Object(a.jsxs)("div",{className:"mt-2 mb-2 row justify-content-between pl-2 pr-2",children:[Object(a.jsx)("button",{className:"btn btn-secondary col-4",onClick:t,children:"Cancel"}),Object(a.jsx)("button",{className:"btn btn-primary col-4",onClick:function(){Object(m.trackPromise)(g(y(v("expenses/new",d),"Expense added successfully").then((function(e){t(),n()}))))},children:"Save Expense"})]})]})]})})}function Me(e){var t=e.children,c=e.tooltip;return Object(s.useEffect)((function(){z()('[data-toggle="tooltip"]').tooltip()}),[]),Object(a.jsx)("div",{className:"link w-50 ","data-toggle":"tooltip","data-placement":"bottom",title:c,children:t})}function Be(e){var t=e.sales,c=e.handleDelete,s=e.place;return Object(a.jsxs)("div",{className:"card w-100",children:[Object(a.jsx)("div",{className:"card-header",children:Object(a.jsx)("h1",{children:"Sales"})}),Object(a.jsx)("div",{className:"card-body",children:Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Date"}),Object(a.jsx)("th",{children:"Number of goods"}),Object(a.jsx)("th",{children:"Total amount"}),Object(a.jsx)("th",{children:"Payment Type"}),Object(a.jsxs)("th",{children:["Customer Pay",Object(a.jsx)("br",{}),"Customer Change"]}),Object(a.jsx)("th",{children:"Status"})]})}),Object(a.jsx)("tbody",{children:t.map((function(t,n){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++n}),Object(a.jsx)("td",{children:Object(a.jsx)(W.b,{to:"/employee/sales/view/".concat(t.id),children:q(t.created_at)})}),Object(a.jsx)("td",{children:t.goods_count}),Object(a.jsx)("td",{children:Object(a.jsx)(Me,{tooltip:t.mpesa_pay?"Mpesa Pay- ".concat(t.mpesa_pay,". Cash Pay-").concat(t.cash_pay):"",children:Object(a.jsx)("span",{children:t.total})})}),Object(a.jsxs)("td",{children:[t.payment_method,t.transaction_code?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Transaction Code: "}),t.transaction_code]}):null]}),Object(a.jsxs)("td",{children:[L(t.customer_pay,1),Object(a.jsx)("br",{}),L(t.customer_change,1)]}),Object(a.jsxs)("td",{children:[1!==t.status&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("button",{className:"btn btn-danger ml-1",onClick:function(){return c(t.id)},children:[Object(a.jsx)("i",{className:"fa fa-trash mr-2"}),"Delete"]}),Object(a.jsxs)("button",{className:"btn btn-info ml-1",onClick:function(){return e.history.push("/employee/dashboard/".concat(s,"/edit/").concat(t.id))},children:[Object(a.jsx)("i",{className:"fa fa-edit mr-2"}),"Edit"]})]}),2===t.status&&Object(a.jsx)(Me,{tooltip:"Edited by ".concat(t.updated_by," at ").concat(q(t.updated_at)),children:Object(a.jsx)("div",{className:"badge badge-success",children:"Edited"})}),1===t.status&&Object(a.jsx)(Me,{tooltip:"Deleted by ".concat(t.updated_by," at ").concat(q(t.updated_at)),children:Object(a.jsx)("div",{className:"badge badge-danger",children:"Deleted"})})]})]},t.id)}))})]})})})]})}var Re=1,qe=2,Ue=3;var Le=Ne((function(e){var t=B("currentUser"),c=Object(s.useState)([]),n=Object(Z.a)(c,2),r=n[0],i=n[1],d=Object(s.useState)({}),o=Object(Z.a)(d,2),j=o[0],b=o[1],h=Object(s.useState)(I.TODAY.value),u=Object(Z.a)(h,2),O=u[0],x=u[1],p=Object(s.useState)(Re),f=Object(Z.a)(p,2),k=f[0],w=f[1],C=function(){var e=U("sales",{sold_by:t.id,period:O});Object(m.trackPromise)(g(y(N(e)).then((function(e){var t=e.data,c=t.sales,a=t.totals;i(c),b(a)}))))};Object(s.useEffect)(C,[O,t.id]);var _=e.match.params.place;return Object(a.jsxs)("div",{className:"container-fluid ml-2 mr-2",children:[Object(a.jsx)("h2",{className:"text-center",children:Object(a.jsx)("div",{className:"float-right mx-3",children:Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)(ae,{selectedPeriod:O,updatePeriod:function(e){return x(e)}})})})}),Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)("div",{className:"card w-100 my-2",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("div",{className:"row justify-content-start",children:[Object(a.jsx)(ce,{title:"Total Sales",icon:"fa fa-shopping-cart",displayValue:j.total_sales||0,onClick:function(){return w(Re)}}),Object(a.jsx)(ce,{title:"Total Expenses",icon:"fa fa-dollar",displayValue:j.total_expenses||0,onClick:function(){return w(qe)}}),Object(a.jsx)(ce,{title:"Total Credits in Ksh",icon:"fa fa-exclamation-circle",displayValue:j.total_credit_amount||0,onClick:function(){return w(Ue)}}),Object(a.jsx)(ce,{title:"Mpesa ",icon:"fa fa-dollar",displayValue:j.mpesa_pay||0}),Object(a.jsx)(ce,{title:"Cash",icon:"fa fa-money-bill-wave",displayValue:j.cash_pay||0})]})})}),k===Re?Object(a.jsx)(Be,Object(l.a)({sales:r,handleDelete:function(e){var c="".concat(t.firstname," ").concat(t.lastname);Object(m.trackPromise)(g(y(v("sales/".concat(e,"/delete"),{sale_id:e,updated_by:c}),"Sale deleted successfully").then((function(e){C()}))))},place:_},e)):k===qe?Object(a.jsx)(Ie,{period:O,currentUser:t}):Object(a.jsx)(Te,{period:O,currentUser:t})]})]})}));var He=Ne((function(e){var t=Object(s.useState)({}),c=Object(Z.a)(t,2),n=c[0],r=c[1],i=Object(s.useState)([]),l=Object(Z.a)(i,2),d=l[0],o=l[1],j=e.match.params.id;return Object(s.useEffect)((function(){var e=U("sales/history",{sale_id:j});Object(m.trackPromise)(g(y(N(e)).then((function(e){var t=e.data.sale[0],c=e.data.history;r(t),o(c)}))))}),[]),Object(a.jsx)("div",{className:"container-fluid",children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsxs)("div",{className:"card",children:[Object(a.jsxs)("div",{className:"card-body border-bottom-0 gradient-3",children:[Object(a.jsx)("h1",{className:"text-center jumbotron w-100 bg-transparent",children:"Sale Details"}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"p-2  row",children:[Object(a.jsxs)("div",{className:"col text-white",children:["Sold By : ","".concat(n.firstname," ").concat(n.lastname)]}),Object(a.jsxs)("div",{className:"col text-white",children:["Date: ",q(n.created_at)]}),Object(a.jsxs)("div",{className:"col text-white",children:["Goods: ",d.length]}),Object(a.jsxs)("div",{className:"col text-white",children:["Total: ",n.total]})]})]}),Object(a.jsx)("div",{className:"card-body",children:Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table table-bordered table-hover",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Category"}),Object(a.jsx)("th",{children:"Quantity"}),Object(a.jsx)("th",{children:"Measure"}),Object(a.jsx)("th",{children:"Amount"})]})}),Object(a.jsx)("tbody",{children:d.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++t}),Object(a.jsx)("td",{children:e.good_name}),Object(a.jsx)("td",{children:e.category_name}),Object(a.jsx)("td",{children:e.quantity}),Object(a.jsx)("td",{children:e.measure}),Object(a.jsx)("td",{children:e.price})]},e.id)}))})]})})})]})})})})}));var Ye=X((function(e){var t=Object(s.useState)({}),c=Object(Z.a)(t,2),n=c[0],r=c[1],i=Object(s.useState)([]),l=Object(Z.a)(i,2),d=l[0],o=l[1],j=e.match.params.id;return Object(s.useEffect)((function(){var e=U("sales/history",{sale_id:j});Object(m.trackPromise)(g(y(N(e)).then((function(e){var t=e.data.sale[0],c=e.data.history;r(t||{}),o(c)}))))}),[]),Object(a.jsxs)("div",{className:"mt-3",children:[Object(a.jsx)("h4",{className:"text-center",children:"Sale Details"}),Object(a.jsxs)("div",{className:"p-2 col-12 row",children:[Object(a.jsxs)("div",{className:"col",children:["Sold By : ","".concat(n.firstname," ").concat(n.lastname)]}),Object(a.jsxs)("div",{className:"col",children:["Date: ",q(n.created_at)]}),Object(a.jsxs)("div",{className:"col",children:["Goods: ",d.length]}),Object(a.jsxs)("div",{className:"col",children:["Total: ",n.total]})]}),Object(a.jsx)("div",{className:"row justify-content-center pr-2 pl-2",children:Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Category"}),Object(a.jsx)("th",{children:"Quantity"}),Object(a.jsx)("th",{children:"Measure"}),Object(a.jsx)("th",{children:"Amount"})]})}),Object(a.jsx)("tbody",{children:d.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++t}),Object(a.jsx)("td",{children:e.good_name}),Object(a.jsx)("td",{children:e.category_name}),Object(a.jsx)("td",{children:e.quantity}),Object(a.jsx)("td",{children:e.measure}),Object(a.jsx)("td",{children:e.price})]},e.id)}))})]})})})]})})),Ke=X(function(e){Object(h.a)(c,e);var t=Object(u.a)(c);function c(e){var a;return Object(j.a)(this,c),(a=t.call(this,e)).updateData=function(){var e=a.state.period;Object(m.trackPromise)(g(y(N(U("sales",{period:e}))).then((function(e){var t=e.data,c=t.sales,s=t.totals;console.log(s),a.setState({sales:c,totals:s})}))))},a.handleDelete=function(e){var t=B("currentUser"),c="".concat(t.firstname," ").concat(t.lastname);Object(m.trackPromise)(g(y(v("sales/".concat(e,"/delete"),{sale_id:e,updated_by:c}),"Sale deleted successfully").then((function(e){a.updateData()}))))},a.updateFilter=function(e){a.setState(Object(l.a)(Object(l.a)({},a.state),e),(function(){return a.updateData()}))},a.state={sales:[],period:I.ALL_TIME.value,totals:{}},a}return Object(b.a)(c,[{key:"componentDidMount",value:function(){this.updateData()}},{key:"render",value:function(){var e=this,t=this.state,c=t.sales,s=t.period,n=t.totals;return Object(a.jsxs)("div",{className:"mt-3",children:[Object(a.jsx)("h2",{children:"Sales"}),Object(a.jsx)("div",{className:"w-100 row justify-content-end mb-2",children:Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)(ae,{selectedPeriod:s,updatePeriod:function(t){return e.updateFilter({period:t})}})})}),Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("div",{className:"row justify-content-start",children:[Object(a.jsx)(ce,{title:"Total Sales",icon:"fa fa-shopping-cart",displayValue:n.total_sales||0}),Object(a.jsx)(ce,{title:"Total Expenses",icon:"fa fa-dollar",displayValue:n.total_expenses||0}),Object(a.jsx)(ce,{title:"Total Credits in Ksh",icon:"fa fa-exclamation-circle",displayValue:n.total_credit_amount||0}),Object(a.jsx)(ce,{title:"Mpesa ",icon:"fa fa-dollar",displayValue:n.mpesa_pay||0}),Object(a.jsx)(ce,{title:"Cash",icon:"fa fa-money-bill-wave",displayValue:n.cash_pay||0})]})}),Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Sold By"}),Object(a.jsx)("th",{children:"Payment Method"}),Object(a.jsx)("th",{children:"Number"}),Object(a.jsx)("th",{children:"Amount"}),Object(a.jsx)("th",{children:"Customer Pay"}),Object(a.jsx)("th",{children:"Customer Change"}),Object(a.jsx)("th",{children:"Date"}),Object(a.jsx)("th",{children:"Status"})]})}),Object(a.jsx)("tbody",{children:c.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++t}),Object(a.jsx)("td",{children:Object(a.jsx)(W.b,{to:"/admin/sales/view/"+e.id,children:e.firstname+" "+e.lastname})}),Object(a.jsx)("td",{children:e.payment_method}),Object(a.jsx)("td",{children:e.goods_count}),Object(a.jsx)("td",{children:e.total}),Object(a.jsx)("td",{children:L(e.customer_pay,1)}),Object(a.jsx)("td",{children:L(e.customer_change,1)}),Object(a.jsx)("td",{children:q(e.created_at)}),Object(a.jsxs)("td",{children:[1===e.status&&Object(a.jsx)(Me,{tooltip:"Deleted by ".concat(e.updated_by," at ").concat(q(e.updated_at)),children:Object(a.jsx)("div",{className:"badge badge-danger",children:"Deleted"})}),2===e.status&&Object(a.jsx)(Me,{tooltip:"Edited by ".concat(e.updated_by," at ").concat(q(e.updated_at)),children:Object(a.jsx)("div",{className:"badge badge-success",children:"Edited"})})]})]},e.id)}))})]})})]})}}]),c}(s.Component));c(91);var Ve=function(){return Object(m.usePromiseTracker)().promiseInProgress?Object(a.jsx)("div",{className:"loader-container hidden-print",children:Object(a.jsx)("div",{className:"loader",children:Object(a.jsx)("span",{children:"Loading..."})})}):Object(a.jsx)(a.Fragment,{})};function We(e){var t=e.handleCloseModal,c=e.updateData,n=e.selectedStock,r=e.selectedPlace,i=e.isAddEdit,d=Object(s.useState)(!1),o=Object(Z.a)(d,2),j=o[0],b=o[1],h=Object(s.useState)({}),u=Object(Z.a)(h,2),O=u[0],x=u[1],p=Object(s.useState)({}),f=Object(Z.a)(p,2),N=f[0],k=f[1];Object(s.useEffect)((function(){n.id&&(x(n),k({price:n.buying_price}),b(!0))}),[n]);var w=function(e){x(Object(l.a)(Object(l.a)({},O),e))};return Object(a.jsx)($,{children:Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)("div",{className:"modal-header",children:Object(a.jsx)("div",{className:"h4 text-center",children:i?j?"Edit Stock":"New Stock":"Update Good Stock"})}),Object(a.jsxs)("div",{className:"modal-body",children:[i?Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Name"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"E.g Salt",value:O.stock_name,onChange:function(e){return w({stock_name:e.target.value})},disabled:r===P})]}):null,r===S&&i?Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Measure"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"E.g Bales",value:O.measure,onChange:function(e){return w({measure:e.target.value})}})]}):null,i?null:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsxs)("label",{htmlFor:"",children:["Buying Price"," ",O.measure?"Per ".concat(O.measure.slice(0,-1)):""]}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Eg 300",value:N.price,onChange:function(e){return k(Object(l.a)(Object(l.a)({},N),{},{price:e.target.value}))}})]}),"'",!i&&Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsxs)("label",{htmlFor:"",children:["Quantity in ",n.measure]}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"e.g 4",value:N.quantity,onChange:function(e){return k(Object(l.a)(Object(l.a)({},N),{},{quantity:e.target.value}))}})]}),Object(a.jsxs)("div",{className:"mt-2 mb-2 row justify-content-between pl-2 pr-2",children:[Object(a.jsx)("button",{className:"btn btn-secondary col-4",onClick:t,children:"Cancel"}),Object(a.jsx)("button",{className:"btn btn-primary col-4",onClick:function(){var e="",a="",s=B("currentUser")||{};r===S?(e="stock/add-restaurant",a="Stock added successfully",j&&(e="stock/edit-restaurant",a="Stock edited successfully",delete O.quantity,delete O.price)):j&&(e="pricings/".concat(O.id,"/edit"),a="Stock updated successfully",O.quantity_remaining=O.quantity,O.buying_price=O.price),!i&&j&&(r===S?(O.price=N.price,O.quantity=N.quantity,a="Stock quantity updated"):(O.quantity_remaining=N.quantity,O.buying_price=N.price,a="Stock quantity updated")),Object(m.trackPromise)(g(y(v(e,Object(l.a)(Object(l.a)({},O),{},{updated_by:"".concat(s.firstname," ").concat(s.lastname)})),a).then((function(e){x({}),t(),c()}))))},children:i?"Save Stock":"Add stock"})]})]})]})})}var Ge=X(function(e){Object(h.a)(c,e);var t=Object(u.a)(c);function c(e){var a;return Object(j.a)(this,c),(a=t.call(this,e)).updateData=function(){Object(m.trackPromise)(g(y(N(U("stock",{place:a.state.selectedPlace}))).then((function(e){var t=e.data.stock;a.setState({stock:t,selectedStock:{}})}))))},a.updatePropChange=function(e){a.setState(Object(l.a)(Object(l.a)({},a.state),e),(function(){return a.updateData()}))},a.onDelete=function(e){var t=a.state.selectedPlace,c="stock/".concat(e.id,"/delete");t===P&&(c="pricings/".concat(e.id,"/delete")),Object(m.trackPromise)(g(y(v(c)).then((function(e){a.updateData()}))))},a.onEdit=function(e){a.setState({selectedStock:e,showAddStock:!0,isAddEdit:!0})},a.onAddStock=function(e){a.setState({selectedStock:e,showAddStock:!0,isAddEdit:!1})},a.toggleShowAdd=function(){a.setState({showAddStock:!a.state.showAddStock,selectedStock:{},isAddEdit:!0})},a.state={selectedPlace:P,stock:[],showAddStock:!1,selectedStock:{},isAddEdit:!1},a}return Object(b.a)(c,[{key:"componentDidMount",value:function(){this.updateData()}},{key:"render",value:function(){var e=this,t=this.state,c=t.selectedPlace,s=t.stock,n=t.showAddStock,r=t.selectedStock,i=t.isAddEdit;return Object(a.jsxs)("div",{className:"mt-3",children:[Object(a.jsx)("h2",{children:"Stock"}),n&&Object(a.jsx)(We,{selectedStock:r,handleCloseModal:this.toggleShowAdd,updateData:this.updateData,selectedPlace:c,isAddEdit:i}),Object(a.jsxs)("div",{className:"row ",children:[Object(a.jsx)("div",{className:"col row justify-content-start",children:Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("div",{className:"btn-group col-12",role:"group","aria-label":"Basic example",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-".concat(c===S?"white border-dark":"dark"),onClick:function(){return e.updatePropChange({selectedPlace:P})},children:"Bar Stock"}),Object(a.jsx)("button",{type:"button",className:"btn btn-".concat(c===P?"white border-dark":"dark"),onClick:function(){return e.updatePropChange({selectedPlace:S})},children:"Restaurant Stock"})]})})}),Object(a.jsx)("div",{className:"col row justify-content-end",children:c===S&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("button",{className:"btn btn-info",onClick:this.toggleShowAdd,children:[Object(a.jsx)("i",{className:"fa fa-plus mr-2"}),"Add Stock"]})})})]}),Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Good"}),Object(a.jsx)("th",{children:"Quantity"}),Object(a.jsx)("th",{children:"@"}),Object(a.jsx)("th",{children:"Total"}),Object(a.jsx)("th",{children:"Action"})]})}),Object(a.jsx)("tbody",{children:s.map((function(t,s){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++s}),Object(a.jsx)("td",{children:Object(a.jsx)(W.b,{to:U("/admin/stock/history",{stock:t.id,place:c}),children:t.stock_name})}),Object(a.jsx)("td",{children:t.quantity}),Object(a.jsx)("td",{children:t.buying_price?"Ksh "+t.buying_price:"_"}),Object(a.jsx)("td",{children:"Ksh "+t.price}),Object(a.jsx)("td",{children:Object(a.jsxs)("div",{className:"d-flex justify-content-center w-75",children:[c===S?Object(a.jsx)(O,{onClick:function(){return e.onEdit(t)},children:Object(a.jsx)("i",{className:"fa fa-edit"})}):null,Object(a.jsx)(O,{onClick:function(){return e.onAddStock(t)},children:Object(a.jsx)("i",{className:"fa fa-plus"})}),Object(a.jsx)(O,{onClick:function(){return e.onDelete(t)},children:Object(a.jsx)("i",{className:"fa fa-trash"})})]})})]},t.id)}))})]})})]})}}]),c}(s.Component)),ze=X(function(e){Object(h.a)(c,e);var t=Object(u.a)(c);function c(e){var s;return Object(j.a)(this,c),(s=t.call(this,e)).updateData=function(){var e=s.props,t=e.stock,c=e.place;Object(m.trackPromise)(g(y(N(U("stock/history",{stock_id:t,place:c}))).then((function(e){var t=e.data,c=t.history,a=t.stock;s.setState({history:c,stock:a})}))))},s.getBadgeColor=function(e){var t=Y(T).find((function(t){return t.value===parseInt(e)}))||{};return Object(a.jsx)("span",{className:"badge badge-".concat(t.badgeColor),children:t.display})},s.state={history:[],stock:{}},s}return Object(b.a)(c,[{key:"componentDidMount",value:function(){this.updateData()}},{key:"render",value:function(){var e=this,t=this.state,c=t.history,s=t.stock;return Object(a.jsxs)("div",{className:"mt-3",children:[Object(a.jsx)("h3",{className:"text-center mb-2",children:"Stock history"}),Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("div",{className:"card-header",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-lg-3 col-lg-4 col-12",children:[Object(a.jsx)("h6",{className:"text-secondary",children:"Stock Name"}),Object(a.jsx)("p",{className:"text-dark",children:s.stock_name})]}),Object(a.jsxs)("div",{className:"col-lg-3 col-lg-4 col-12",children:[Object(a.jsx)("h6",{className:"text-secondary",children:"Current Quantity"}),Object(a.jsx)("p",{className:"text-dark",children:s.quantity})]}),Object(a.jsxs)("div",{className:"col-lg-3 col-lg-4 col-12",children:[Object(a.jsx)("h6",{className:"text-secondary",children:"Total Stock Cost"}),Object(a.jsx)("p",{className:"text-dark",children:s.price})]}),Object(a.jsxs)("div",{className:"col-lg-3 col-lg-4 col-12",children:[Object(a.jsx)("h6",{className:"text-secondary",children:"Created"}),Object(a.jsx)("p",{className:"text-dark",children:q(s.created_at)})]})]})}),Object(a.jsx)("div",{className:"card-body",children:Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Date"}),Object(a.jsx)("th",{children:"Buying Price"}),Object(a.jsx)("th",{children:"Quantity"}),Object(a.jsx)("th",{children:"Action Type"}),Object(a.jsx)("th",{children:"Updated By"})]})}),Object(a.jsx)("tbody",{children:c.map((function(t,c){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++c}),Object(a.jsx)("td",{title:q(t.updated_at),children:M(t.updated_at)}),Object(a.jsx)("td",{children:"Ksh "+t.buying_price}),Object(a.jsx)("td",{children:t.quantity}),Object(a.jsx)("td",{children:e.getBadgeColor(t.action_type)}),Object(a.jsx)("td",{children:t.updated_by})]},t.id)}))})]})})})]})]})}}]),c}(s.Component));function Qe(e){var t=Object(s.useState)([]),c=Object(Z.a)(t,2),n=c[0],r=c[1],i=Object(s.useState)(P),l=Object(Z.a)(i,2),d=l[0],o=l[1],j=Object(s.useState)(!1),b=Object(Z.a)(j,2),h=b[0],u=b[1],x=Object(s.useState)(!1),p=Object(Z.a)(x,2),f=p[0],v=p[1],k=Object(s.useState)({}),w=Object(Z.a)(k,2),C=w[0],_=w[1],E=function(){Object(m.trackPromise)(g(y(N(U("stock",{place:d}))).then((function(e){r(e.data.stock)}))))};Object(s.useEffect)(E,[d]);var A=function(){u(!h)};return Object(a.jsxs)("div",{className:"container-fluid",children:[h&&Object(a.jsx)(We,{selectedStock:{},handleCloseModal:A,updateData:E,selectedPlace:d,isAddEdit:!0}),f&&Object(a.jsx)(Je,{handleCloseModal:function(){v(!1),_({})},updateData:E,selectedStock:C,place:d}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("div",{className:"card-header border-bottom-0",children:Object(a.jsx)("h1",{className:"text-center jumbotron w-100 gradient-3",children:"Stock"})}),Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsxs)("div",{className:"w-100 row",children:[Object(a.jsx)("div",{className:"col row justify-content-start",children:Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("div",{className:"btn-group col-12",role:"group","aria-label":"Basic example",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-".concat(d===S?"white border-dark":"dark"),onClick:function(){return o(P)},children:"Bar Stock"}),Object(a.jsx)("button",{type:"button",className:"btn btn-".concat(d===P?"white border-dark":"dark"),onClick:function(){return o(S)},children:"Restaurant Stock"})]})})}),Object(a.jsx)("div",{className:"col row justify-content-end",children:d===S&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("button",{className:"btn btn-info",onClick:A,children:[Object(a.jsx)("i",{className:"fa fa-plus mr-2"}),"Add Stock"]})})})]}),Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table table-striped table-hover",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Good"}),Object(a.jsx)("th",{children:"Quantity"}),Object(a.jsx)("th",{children:"@"}),Object(a.jsx)("th",{children:"Total"}),Object(a.jsx)("th",{children:"Action"})]})}),Object(a.jsx)("tbody",{children:n.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++t}),Object(a.jsx)("td",{children:e.stock_name}),Object(a.jsx)("td",{children:e.quantity}),Object(a.jsx)("td",{children:e.buying_price?"Ksh "+e.buying_price:"_"}),Object(a.jsx)("td",{children:"Ksh "+e.price}),Object(a.jsx)("td",{children:Object(a.jsx)("div",{className:"d-flex justify-content-center w-75",children:Object(a.jsx)(O,{onClick:function(){v(!0),_(e)},children:Object(a.jsx)("i",{className:"fa fa-plus"})})})})]},e.id)}))})]})})]})]})})})]})}function Je(e){var t=e.selectedStock,c=e.handleCloseModal,n=e.place,r=e.updateData,i=Object(s.useState)({}),d=Object(Z.a)(i,2),o=d[0],j=d[1];Object(s.useEffect)((function(){t.id&&j({id:t.id,price:t.buying_price})}),[t]);var b=function(e){j(Object(l.a)(Object(l.a)({},o),e))};return Object(a.jsx)($,{children:Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)("div",{className:"modal-header",children:Object(a.jsxs)("div",{className:"h4 text-center",children:["New Stock for -",t.stock_name]})}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Buying Price"}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Eg 300",value:o.price,onChange:function(e){return b({price:e.target.value})}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsxs)("label",{htmlFor:"",children:["Quantity in ",t.measure]}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Eg 3",value:o.quantity,onChange:function(e){return b({quantity:e.target.value})}})]}),Object(a.jsxs)("div",{className:"mt-2 mb-2 row justify-content-between pl-2 pr-2",children:[Object(a.jsx)("button",{className:"btn btn-secondary col-4",onClick:c,children:"Cancel"}),Object(a.jsx)("button",{className:"btn btn-primary col-4",onClick:function(){var e="",t="",a=B("currentUser")||{};n===S?(e="stock/edit-restaurant",t="Stock edited successfully"):(e="pricings/".concat(o.id,"/edit"),t="Stock updated successfully",o.quantity_remaining=o.quantity,o.buying_price=o.price),Object(m.trackPromise)(g(y(v(e,Object(l.a)(Object(l.a)({},o),{},{updated_by:"".concat(a.firstname," ").concat(a.lastname)})),t).then((function(e){j({}),c(),r()}))))},children:"Add Stock"})]})]})]})})}function Xe(e){var t=e.handleCloseModal,c=e.currentUser,n=e.updateData,r=Object(s.useState)({}),i=Object(Z.a)(r,2),d=i[0],o=i[1];Object(s.useEffect)((function(){o({admin_id:c.id})}),[c]);return Object(a.jsx)($,{children:Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)("div",{className:"modal-header",children:Object(a.jsx)("div",{className:"h4 text-center",children:"Expense Details"})}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Expense Amount"}),Object(a.jsx)("input",{type:"number",className:"form-control",placeholder:"E.g 400",value:d.expense_amount,onChange:function(e){return o(Object(l.a)(Object(l.a)({},d),{},{expense_amount:e.target.value}))}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Expense Description"}),Object(a.jsx)("textarea",{name:"",id:"",cols:"30",rows:"3",className:"form-control",placeholder:"E.g Payment for motorbike",value:d.expense_description,onChange:function(e){return o(Object(l.a)(Object(l.a)({},d),{},{expense_description:e.target.value}))}})]}),Object(a.jsxs)("div",{className:"mt-2 mb-2 row justify-content-between pl-2 pr-2",children:[Object(a.jsx)("button",{className:"btn btn-secondary col-4",onClick:t,children:"Cancel"}),Object(a.jsx)("button",{className:"btn btn-primary col-4",onClick:function(){Object(m.trackPromise)(g(y(v("expenses/new",d),"Expense added successfully").then((function(e){t(),n()}))))},children:"Save Expense"})]})]})]})})}var Ze=X((function(){var e=Object(s.useState)(!1),t=Object(Z.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)([]),i=Object(Z.a)(r,2),l=i[0],d=i[1],o=Object(s.useState)({}),j=Object(Z.a)(o,2),b=j[0],h=j[1],u=function(){n(!c)},O=function(){Object(m.trackPromise)(g(y(N(U("expenses",{period:b}))).then((function(e){d(e.data.expenses)}))))};Object(s.useEffect)(O,[b]);var x=B("currentUser");return Object(a.jsx)("div",{className:"mt-3",children:Object(a.jsxs)("div",{className:"card w-100",children:[c&&Object(a.jsx)(Xe,{currentUser:x,handleCloseModal:u,updateData:O}),Object(a.jsx)("div",{className:"card-header",children:Object(a.jsxs)("h1",{className:"w-100",children:["Expenses",Object(a.jsxs)("div",{className:"float-right row justify-content-end",children:[Object(a.jsx)("div",{className:"form-group mx-1",children:Object(a.jsx)(ae,{selectedPeriod:b,updatePeriod:function(e){return h(e)}})}),Object(a.jsx)("div",{className:"form-group mx-1",children:Object(a.jsxs)("button",{className:"btn btn-info ",onClick:u,children:[Object(a.jsx)("i",{className:"fa fa-plus mr-2"}),"Add Expense"]})})]})]})}),Object(a.jsx)("div",{className:"card-body",children:Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Recorded By"}),Object(a.jsx)("th",{children:"Description"}),Object(a.jsx)("th",{children:"Amount"}),Object(a.jsx)("th",{children:"Created"}),Object(a.jsx)("th",{children:"Updated"}),Object(a.jsx)("th",{children:"Action"})]})}),Object(a.jsx)("tbody",{children:l.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++t}),Object(a.jsx)("td",{children:e.admin_name?e.admin_name+" (admin)":e.employee_name+" (employee)"}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{className:"text-wrap",children:e.expense_description})}),Object(a.jsx)("td",{children:e.expense_amount}),Object(a.jsx)("td",{title:q(e.created_at),children:M(e.created_at)}),Object(a.jsx)("td",{title:q(e.updated_at),children:M(e.updated_at)}),Object(a.jsx)("td",{children:Object(a.jsxs)("button",{className:"btn btn-danger",onClick:function(){return function(e){Object(m.trackPromise)(g(y(v("expenses/delete",{expense_id:e.id}),"Expense deleted successfully").then((function(e){return O()}))))}(e)},children:[Object(a.jsx)("i",{className:"fa fa-trash mr-2"}),"Delete"]})})]},e.id)}))})]})})})]})})}));var $e=X((function(){var e=Object(s.useState)([]),t=Object(Z.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)(""),i=Object(Z.a)(r,2),l=i[0],d=i[1],o=function(){Object(m.trackPromise)(g(y(N(U("creditors",{period:l}))).then((function(e){n(e.data.creditors)}))))},j=function(e){Object(m.trackPromise)(g(y(v("creditors/clear",{credit_id:e.id,is_cleared:!e.is_cleared}),"Credit Cleared successfully").then((function(e){o()}))))};return Object(s.useEffect)(o,[l]),Object(a.jsxs)("div",{className:"mt-3",children:[Object(a.jsxs)("h2",{children:["Debtors"," ",Object(a.jsx)("div",{className:"float-right row justify-content-end",children:Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)(ae,{selectedPeriod:l,updatePeriod:function(e){return d(e)}})})})]}),Object(a.jsx)("div",{className:"w-100 px-1 py-1",children:Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table display table-hover table-striped datatable",style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Amount"}),Object(a.jsx)("th",{children:"Reason"}),Object(a.jsx)("th",{children:"Updated At"}),Object(a.jsx)("th",{children:"Status"}),Object(a.jsx)("th",{children:"Action"})]})}),Object(a.jsx)("tbody",{children:c.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:++t}),Object(a.jsxs)("td",{children:[Object(a.jsx)("b",{children:e.creditor_name}),Object(a.jsx)("br",{}),e.creditor_phone]}),Object(a.jsx)("td",{children:e.credit_amount}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{className:"text-wrap",children:e.credit_reason})}),Object(a.jsx)("td",{children:q(e.updated_at)}),Object(a.jsx)("td",{children:e.is_cleared?Object(a.jsx)("span",{className:"badge badge-success",children:"Cleared"}):Object(a.jsx)("span",{className:"badge badge-warning",children:"Pending"})}),Object(a.jsxs)("td",{children:[e.is_cleared?Object(a.jsxs)("button",{className:"btn btn-warning",onClick:function(){return j(e)},children:[Object(a.jsx)("i",{className:"fa fa-refresh mr-2"}),"Revive"]}):Object(a.jsxs)("button",{className:"btn btn-success mx-1",onClick:function(){return j(e)},children:[Object(a.jsx)("i",{className:"fa fa-check mr-2"}),"Clear"]}),Object(a.jsx)(W.b,{to:"/admin/sales/view/".concat(e.sale_id),className:"btn btn-dark mx-1",children:"View Sale"})]})]},e.id)}))})]})})})]})}));function et(e){var t=e.item;return Object(a.jsxs)("div",{className:"w-100 card",children:[Object(a.jsx)("div",{className:"card-header",children:Object(a.jsx)("h4",{children:q(t.created_at)})}),Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col border-right border-dark",children:[Object(a.jsx)(tt,{display:t.sales_total,label:"Total Sales"}),Object(a.jsx)(tt,{display:t.mpesa_sales,label:"Mpesa sales"}),Object(a.jsx)(tt,{display:t.cash_sales,label:"Jumia sales"}),Object(a.jsx)(tt,{display:t.card_sales,label:"Card Sales"}),Object(a.jsx)(tt,{display:t.glovo_sales,label:"Glovo Sales"}),Object(a.jsx)(tt,{display:t.uber_eats_sales,label:"Uber Eats Sales"}),Object(a.jsx)(tt,{display:t.little_cab_sales,label:"Little Cab Sales"})]}),Object(a.jsxs)("div",{className:"col ",children:[Object(a.jsx)(tt,{display:t.credit_sales,label:"Credit Sales"}),Object(a.jsx)(tt,{display:t.expenses_amount_total,label:"Total Expenses"}),Object(a.jsx)(tt,{display:t.closing_bar_stock,label:"Closing Bar Stock"}),Object(a.jsx)(tt,{display:t.closing_restaurant_stock,label:"Closing Restaurant Stock"})]})]})})]})}function tt(e){var t=e.display,c=e.label;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h6",{children:c}),Object(a.jsx)("p",{children:"Ksh "+t})]})}var ct=X((function(){var e=Object(s.useState)(I.ALL_TIME.value),t=Object(Z.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)([]),i=Object(Z.a)(r,2),l=i[0],d=i[1];return Object(s.useEffect)((function(){Object(m.trackPromise)(g(y(N(U("summary",{period:c}))).then((function(e){d(e.data.summary)}))))}),[c]),Object(a.jsxs)("div",{className:"mt-3",children:[Object(a.jsxs)("h1",{className:"mb-4",children:["Summary",Object(a.jsx)("div",{className:"float-right",children:Object(a.jsx)(ae,{selectedPeriod:c,updatePeriod:function(e){return n(e)}})})]}),l.map((function(e){return Object(a.jsx)(et,{item:e},e.id)}))]})}));var at=function(){var e=new URLSearchParams(Object(d.g)().search);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ve,{}),Object(a.jsx)(o.a,{hideProgressBar:!0}),Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{path:"/login",render:function(e){return Object(a.jsx)(Ce,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/employee",render:function(e){return Object(a.jsx)(De,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/employee/dashboard/:id",render:function(e){return Object(a.jsx)(ge,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/employee/dashboard/:id/edit/:sale_id",render:function(e){return Object(a.jsx)(ge,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/employee/sales/:place",render:function(e){return Object(a.jsx)(Le,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/employee/stock",render:function(e){return Object(a.jsx)(Qe,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/employee/sales/view/:id",render:function(e){return Object(a.jsx)(He,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/employee/print",render:function(t){return Object(a.jsx)(ve,Object(l.a)(Object(l.a)({},t),{},{sale_id:e.get("sale_id"),width:e.get("width")}))}}),Object(a.jsx)(d.b,{exact:!0,path:"/employee/print-bar",render:function(t){return Object(a.jsx)(ye,Object(l.a)(Object(l.a)({},t),{},{sale_id:e.get("sale_id"),width:e.get("width")}))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin",render:function(e){return Object(a.jsx)(le,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"admin/dashboard",render:function(e){return Object(a.jsx)(le,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin/sales/view/:id",render:function(e){return Object(a.jsx)(Ye,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin/sales",render:function(e){return Object(a.jsx)(Ke,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin/expenses",render:function(e){return Object(a.jsx)(Ze,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin/debtors",render:function(e){return Object(a.jsx)($e,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin/summary",render:function(e){return Object(a.jsx)(ct,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin/admins",render:function(e){return Object(a.jsx)(te,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin/stock",render:function(e){return Object(a.jsx)(Ge,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin/stock/history",render:function(t){return Object(a.jsx)(ze,Object(l.a)(Object(l.a)({},t),{},{stock:e.get("stock"),place:e.get("place")}))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin/employees",render:function(e){return Object(a.jsx)(we,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin/categories",render:function(e){return Object(a.jsx)(Se,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin/products/:id",render:function(e){return Object(a.jsx)(Ee,Object(l.a)({},e))}}),Object(a.jsx)(d.b,{exact:!0,path:"/admin/products/:id/pricing",render:function(e){return Object(a.jsx)(Ae,Object(l.a)({},e))}}),Object(a.jsx)(d.a,{exact:!0,to:"/login"})]})]})};var st=function(){return Object(a.jsx)(W.a,{children:Object(a.jsx)(at,{})})},nt=function(e){e&&e instanceof Function&&c.e(5).then(c.bind(null,470)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;c(e),a(e),s(e),n(e),r(e)}))},rt=c(31);c(92),c(93),c(94),c(95),c(97);window.$=z.a,window.Popper=rt.default,i.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(st,{})}),document.getElementById("root")),nt()}},[[98,1,3]]]);
//# sourceMappingURL=main.d9c25ea8.chunk.js.map